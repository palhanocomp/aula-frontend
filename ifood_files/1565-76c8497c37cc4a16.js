
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4ca6e66f-a0ae-548b-8057-36130149e62f")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{64457:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(94184),l=n.n(s),c=n(14416),u=n(26793),d=n(5152),f=n(65857),p=n(77849),h=n(46220),m=n(18967),v=n(59387),b=n(32754),g=n(35783);n(63735);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=(0,d.default)((function(){return n.e(8366).then(n.bind(n,58366))}),{loadableGenerated:{webpack:function(){return[58366]}},ssr:!1});function C(e){var t,o,a,s,d,y,C,_,O,k,S=e.goToStep,P=e.onBackMapsButton,I=e.isLoading,R=(0,c.v9)((function(e){return e.addressSearch})),w=R.search,N=R.modalAddressNotFound,T=(0,i.useState)(!1),A=T[0],E=T[1],q=(0,i.useState)(!1),M=q[0],Z=q[1],D=(0,c.I0)(),L=(0,u.$)("address").t,B=w.selected,F=null===B||void 0===B?void 0:B.geolocated,G=(0,i.useState)(B?{lat:null===w||void 0===w||null===(t=w.selected)||void 0===t||null===(o=t.initialCoords)||void 0===o?void 0:o.latitude,lng:null===w||void 0===w||null===(a=w.selected)||void 0===a||null===(s=a.initialCoords)||void 0===s?void 0:s.longitude}:void 0),U=G[0],H=G[1],z=j((0,h.Z)(m.x4),1)[0],$=(0,i.useState)(void 0),V=$[0],W=$[1],Q=JSON.stringify(B),J=JSON.stringify(U);(0,i.useEffect)((function(){F?g.ZP.getGeo().then((function(e){var t=e.coords,n=t.latitude,r=t.longitude;W({lat:n,lng:r})}),(function(){})):W(void 0)}),[Q]),(0,i.useEffect)((function(){var e,t,n,r;(null===U||void 0===U?void 0:U.lat)===(null===B||void 0===B||null===(e=B.initialCoords)||void 0===e?void 0:e.latitude)&&(null===U||void 0===U?void 0:U.lng)===(null===B||void 0===B||null===(t=B.initialCoords)||void 0===t?void 0:t.longitude)||H(B?{lat:null===B||void 0===B||null===(n=B.initialCoords)||void 0===n?void 0:n.latitude,lng:null===B||void 0===B||null===(r=B.initialCoords)||void 0===r?void 0:r.longitude}:void 0)}),[Q,J]);var Y=(0,i.useCallback)((function(e,t){if("modalAddressNotFound"===e)D((0,p.a4)(t))}),[D]);if(!z||I)return(0,r.jsx)("div",{className:"address-finder__no-api","data-test-id":"spinner",children:(0,r.jsx)(v.$j,{})});if(z&&!("google"in n.g))return(0,r.jsx)("div",{className:"address-finder__no-api",children:(0,r.jsx)(v.Bc,{})});var K=(0,b.Z)([null===w||void 0===w||null===(d=w.selected)||void 0===d?void 0:d.street,null===w||void 0===w||null===(y=w.selected)||void 0===y?void 0:y.streetNumber],L("maps.address-street-separator")),X=(0,b.Z)([null===w||void 0===w||null===(C=w.selected)||void 0===C?void 0:C.city,null===w||void 0===w||null===(_=w.selected)||void 0===_?void 0:_.state]," - "),ee=(0,b.Z)([null===w||void 0===w||null===(O=w.selected)||void 0===O?void 0:O.district,X]),te=function(e,t){if("Request failed with status code 404"===e)return t("search.no-address-found");return}(w.error,L);return V||U||F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:l()("address-finder__complete-form",{"address-finder__complete-form--active":M}),children:[(0,r.jsx)("div",{className:"address-finder__powered-by",children:(0,r.jsx)(x,{})}),(0,r.jsx)(f.q9,{goToStep:S})]}),(0,r.jsx)(f.Th,{geoPosition:V,isLoading:w.isLoadingSelected,restrictDrag:!(null===w||void 0===w||null===(k=w.selected)||void 0===k?void 0:k.geolocated),position:U,onDragEnd:function(e){var t,n,r,i;e.lat!==(null===w||void 0===w||null===(t=w.selected)||void 0===t||null===(n=t.coords)||void 0===n?void 0:n.latitude)&&e.lng!==(null===w||void 0===w||null===(r=w.selected)||void 0===r||null===(i=r.coords)||void 0===i?void 0:i.longitude)&&E(!0),D((0,p.qN)({latitude:e.lat,longitude:e.lng}))},isApiLoaded:z,canSubmit:!te,title:M?"":K,subtitle:M?"":ee,handleBackButton:function(){M?Z(!1):P()},handleSubmit:function(){var e=A;return E(!1),e&&D((0,p.mt)({latitude:B.coords.latitude,longitude:B.coords.longitude})),Z(!0)},disabled:M||!w.selected,toastMessage:te,showFocusButton:Boolean(F&&V),isModalAddressNotFoundOpen:N.isOpen,setModalOpen:Y})]}):null}C.propTypes={goToStep:a().func,onBackMapsButton:a().func.isRequired,isLoading:a().bool},C.defaultProps={goToStep:function(){},isLoading:!1},t.Z=C},42660:function(e,t,n){"use strict";var r=n(85893),i=(n(67294),n(45697)),o=n.n(i),a=n(94184),s=n.n(a),l=n(5152),c=(n(29306),(0,l.default)((function(){return n.e(515).then(n.bind(n,10515))}),{loadableGenerated:{webpack:function(){return[10515]}},ssr:!1})),u=(0,l.default)((function(){return n.e(6660).then(n.bind(n,66660))}),{loadableGenerated:{webpack:function(){return[66660]}},ssr:!1}),d={empty:o().bool,forMobile:o().bool,forDesktop:o().bool},f=function(e){var t=e.empty,n=e.forMobile,i=e.forDesktop;return(0,r.jsx)("div",{className:s()("address-icon",{"address-icon--empty":t,"address-icon--mobile":n,"address-icon--desktop":i}),children:t?(0,r.jsx)(u,{}):(0,r.jsx)(c,{})})};f.propTypes=d,f.defaultProps={empty:!1,forMobile:!1,forDesktop:!1},t.Z=f},10902:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(91768),l=n(14416),c=n(14890),u=n(67926),d=n(36750),f=n(40059),p=n(35432),h=n.n(p),m=n(59387),v=n(67525);n(47112);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},v.Z,{restaurantAddress:a().string.isRequired}),y=function(e){var t=e.t,n=e.restaurantAddress;return(0,r.jsxs)("div",{className:"address-invalid-wrapper address-invalid-from",children:[(0,r.jsx)(m.JO,{className:"address-invalid-from__icon",name:"pin"}),(0,r.jsxs)(h(),{tagName:"p",className:"address-invalid-dialog__text",tabIndex:"0",clamp:2,useNativeClamp:!0,children:[t("invalid-address-dialog.restaurant-address"),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"address-invalid-dialog__address",children:n})]})]})};y.propTypes=g;var j=(0,s.Z)("restaurant")(y);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}({},v.Z,{deliveryAddress:a().string.isRequired}),_=function(e){var t=e.t,n=e.deliveryAddress;return(0,r.jsxs)("div",{className:"address-invalid-wrapper address-invalid-to",children:[(0,r.jsx)(m.JO,{className:"address-invalid-to__icon",name:"alert"}),(0,r.jsxs)(h(),{tagName:"p",className:"address-invalid-dialog__text",tabIndex:"0",clamp:2,useNativeClamp:!0,children:[t("invalid-address-dialog.not-delivery-here"),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"address-invalid-dialog__address",children:n})]})]})};_.propTypes=C;var O=(0,s.Z)("restaurant")(_);function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function R(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?k(e):t}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}var N=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}var A={toggleAddressModalAction:f.Ec},E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}({},v.Z,{actions:(0,d.Z)(Object.keys(A),a().func.isRequired).isRequired,isOpen:a().bool,onRequestClose:a().func.isRequired,restaurantAddress:a().string.isRequired,deliveryAddress:a().string}),q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,i,o=T(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).openModal=t.openModal.bind(k(t)),t.closeModal=t.closeModal.bind(k(t)),t}return t=a,(n=[{key:"openModal",value:function(){var e=this.props,t=e.actions;(0,e.onRequestClose)(),t.toggleAddressModalAction({open:!0,keepCurrentPageAfterSelect:!0})}},{key:"closeModal",value:function(e){this.setState(P({},e,!1))}},{key:"pickAddressMessage",value:function(){return this.props.deliveryAddress?"change-address-label":"enter-address"}},{key:"dismissMessage",value:function(){return this.props.deliveryAddress?"restaurant:invalid-address-dialog.confirm-dismiss-label":"common:cancel"}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.isOpen,i=e.onRequestClose,o=e.deliveryAddress,a=e.restaurantAddress;return(0,r.jsxs)(m.u_,{isOpen:n,type:"dialog",animation:"bottom",onRequestClose:i,variant:"address-invalid-dialog",children:[!o&&(0,r.jsx)("h1",{className:"address-invalid-dialog__title",children:t("restaurant:invalid-address-dialog.title")}),(0,r.jsx)(j,{restaurantAddress:a}),o&&(0,r.jsx)(O,{deliveryAddress:o}),(0,r.jsx)(m.zx,{tabIndex:"0",color:"primary",fullWidth:!0,label:t("restaurant:invalid-address-dialog.".concat(this.pickAddressMessage())),type:"button",onClick:this.openModal,"data-test-id":"address-invalid-dialog__change-address"}),(0,r.jsx)(m.zx,{tabIndex:"0",color:"white",fullWidth:!0,label:t(this.dismissMessage()),type:"button",onClick:i,"data-test-id":"address-invalid-dialog__dismiss-button"})]})}}])&&S(t.prototype,n),i&&S(t,i),a}(i.PureComponent);q.propTypes=E,q.defaultProps={isOpen:!1,deliveryAddress:""};var M=(0,u.Z)(q,[(0,l.$j)(null,(function(e){return{actions:(0,c.DE)(A,e)}})),(0,s.Z)(["common","restaurant"])])},36991:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(94184),l=n.n(s),c=n(26793),u=n(14416),d=n(5152),f=n(77849),p=n(59387),h=(n(71209),(0,d.default)((function(){return n.e(8366).then(n.bind(n,58366))}),{loadableGenerated:{webpack:function(){return[58366]}},ssr:!1}));function m(e){var t=e.onSubmit,n=e.onBack,o=e.role,a=e.onClick,s=e.shouldFocusInput,d=e.shouldCleanInput,m=e.sticky,v=e.icon,b=(0,c.$)(["common","address"]).t,g=(0,u.v9)((function(e){return e.addressSearch.geolocation})),y=(0,i.useState)(""),j=y[0],x=y[1],C=(0,i.useState)(b("address:search.input-label")),_=C[0],O=C[1],k=(0,i.useRef)(null),S=(0,u.I0)(),P="button"===o,I=function(){return x("")};return(0,i.useEffect)((function(){k.current&&s&&k.current.focus(),d&&(I(),S((0,f.q2)()))}),[s,d,S]),(0,r.jsxs)("div",{className:l()("address-search-input",{"address-search-input--role-button":P,"address-search-input--sticky":m}),children:[(0,r.jsx)("input",{ref:k,className:"address-search-input__field",placeholder:_,label:_,"aria-label":b("address:search.input-label"),name:"address-ifood-search",onChange:function(e){x(e.target.value),t(e.target.value,g)},value:j,disabled:P,onFocus:function(){return O("")},onBlur:function(){return O(b("address:search.input-label"))}}),(0,r.jsx)(p.Ei,{onClick:n,icon:v||P?"search":"arrow-left-thin",variant:"address-search-input__icon",transparent:!0,ariaLabel:b("common:go-back")}),j&&(0,r.jsx)(p.Ei,{icon:"error",color:"gray",variant:"address-search-input__erase-button",transparent:!0,ariaLabel:b("common:clear-field"),onClick:function(){I(),S((0,f.q2)())}}),P&&(0,r.jsx)("button",{className:"address-search-input__button",onClick:a,"aria-label":_}),!P&&(0,r.jsx)("div",{className:"address-search-input__powered-by",children:(0,r.jsx)(h,{})})]})}m.propTypes={shouldFocusInput:a().bool,shouldCleanInput:a().bool,onBack:a().func,onClick:a().func,onSubmit:a().func,role:a().oneOf(["button","input"]),sticky:a().bool,icon:a().string},m.defaultProps={shouldFocusInput:!1,shouldCleanInput:!1,onSubmit:function(){},onBack:void 0,onClick:void 0,role:"input",sticky:!1,icon:void 0},t.Z=m},62794:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(26793),l=n(27361),c=n.n(l),u=n(41609),d=n.n(u),f=n(5152),p=n(12751),h=n(65857),m=n(60996),v=(n(36837),(0,f.default)((function(){return n.e(4422).then(n.bind(n,24422))}),{loadableGenerated:{webpack:function(){return[24422]}},ssr:!1})),b={results:a().array,handleClick:a().func.isRequired,isLoading:a().bool,searchIsClean:a().bool,handleSearchOnMap:a().func,displayAddressNotFound:a().bool};function g(e){var t=e.results,n=e.handleClick,o=e.isLoading,a=e.searchIsClean,l=e.handleSearchOnMap,u=e.displayAddressNotFound,f=(0,s.$)(["address"]).t,b=(0,i.useState)(void 0),g=b[0],y=b[1];return(0,i.useEffect)((function(){t&&0!==t.length||y(void 0)}),[t]),(0,r.jsx)("ul",{className:"address-search-list",children:o?(0,r.jsx)(p.hO,{}):(0,r.jsxs)(r.Fragment,{children:[t.map((function(e){return(0,r.jsx)("li",{"data-test-id":"button-address-".concat(e.place_id),children:(0,r.jsx)(h.x4,{kind:"simple",onClick:function(){n(e),y(e.place_id)},hasKebab:!1,label:c()(e,"structured_formatting.main_text",e.description),subLabel:c()(e,"structured_formatting.secondary_text"),leftIcon:"pin-o",isActive:g===e.place_id})},e.place_id)})),u&&(a||!d()(t))&&(0,r.jsx)("li",{"data-test-id":"button-address-not-found",className:"address-search-list__not-found",children:(0,r.jsx)(h.x4,{kind:"simple",onClick:function(){m.Z.clickAddressSearchOnMapNotListed(),l(),y("notFound")},label:f("address-search.did-not-find-address"),subLabel:f("address-search.no-results-action"),hasKebab:!1,leftIcon:(0,r.jsx)(v,{}),isActive:"notFound"===g})})]})})}g.propTypes=b,g.defaultProps={results:[],isLoading:!1,searchIsClean:!1,displayAddressNotFound:!0,handleSearchOnMap:function(){}},t.Z=g},65857:function(e,t,n){"use strict";n.d(t,{x4:function(){return We},q9:function(){return Ut},Zx:function(){return P.Z},sE:function(){return S},G:function(){return Y},Th:function(){return gt},qo:function(){return Ue},pI:function(){return Kt},yM:function(){return Ke.Z},xc:function(){return Xe.Z},m:function(){return rn},lJ:function(){return Ye},VG:function(){return Pt}});var r=n(85893),i=n(67294),o=n(26793),a=n(14416),s=n(41609),l=n.n(s),c=n(25091),u=n(13629),d=n(32754),f=n(90338),p=n(99097),h=n(9032),m=n(12751),v=n(75215),b=n(35985),g=n(28511),y=n(60996),j=n(68877);n(50574);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}var S=function(){var e=(0,o.$)("address").t,t=(0,a.I0)(),n=(0,i.useState)([]),s=n[0],x=n[1],k=(0,a.v9)((function(e){return e.addressSearch.customer})),S=k.isLoading,P=k.addresses,I=(0,a.v9)((function(e){return e.address})),R=_((0,b.Z)(),1)[0];(0,i.useEffect)((function(){R&&(t((0,p.bZ)()),y.Z.viewAddressListPage())}),[R,t]);var w=function(e){return!(!e||e.toLowerCase()!==c.S54)},N=function(e){return!(!e||e.toLowerCase()!==c.soK)},T=P.find((function(e){return w(e.alias)})),A=P.find((function(e){return N(e.alias)})),E=P.filter((function(e){return!w(e.alias)&&!N(e.alias)})),q=function(e){j.ZP.updateGeoPoint(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},e.coordinates)),y.Z.clickAddressChangeAction(),t((0,h.Ul)((0,v.QD)(e)))},M=function(e){var n=e.externalId;y.Z.clickAddressEditAction();var r=P.find((function(e){return e.externalId===n}));t((0,h.sI)((0,v.QD)(r)))},Z=function(n){var r=n.externalId,i=n.id;y.Z.clickAddressRemoveAction(),I&&I.externalId===r?t((0,g.PJ)({message:e("options.can-not-delete-current-address")})):(x(O(s).concat([r])),t((0,f.V$)(i)))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{externalId:"",id:""};return{editCallback:function(){return M(e)},deleteCallback:function(){return Z(e)}}};return S?(0,r.jsx)("div",{className:"address-list","data-test-id":"address-list-loading",children:(0,r.jsx)(m.hO,{})}):(0,r.jsxs)("div",{className:"address-list","data-test-id":"address-list",children:[l()(P)&&(0,r.jsx)(Pt,{}),T&&(0,r.jsx)(We,{hidden:s.some((function(e){return e===T.externalId})),isActive:I&&I.externalId===T.externalId,label:e("home.button-label"),ariaLabel:e("home.button-aria-label"),subLabel:(0,u.MH)((0,d.Z)([null===T||void 0===T?void 0:T.streetName,null===T||void 0===T?void 0:T.streetNumber,null===T||void 0===T?void 0:T.complement])),onClick:function(){return q(T)},hasKebab:!0,leftIcon:"house",kebabActions:D(T)}),A&&(0,r.jsx)(We,{hidden:s.some((function(e){return e===A.externalId})),isActive:I&&I.externalId===A.externalId,label:e("workplace.button-label"),ariaLabel:e("workplace.button-aria-label"),subLabel:(0,u.MH)((0,d.Z)([null===A||void 0===A?void 0:A.streetName,null===A||void 0===A?void 0:A.streetNumber,null===A||void 0===A?void 0:A.complement])),onClick:function(){return q(A)},hasKebab:!0,leftIcon:"coffee-cup",kebabActions:D(A)}),E.map((function(e){var t=(0,u.MH)((0,d.Z)([null===e||void 0===e?void 0:e.streetName,null===e||void 0===e?void 0:e.streetNumber])),n=(0,d.Z)([(0,u.MH)((0,d.Z)([e.complement,e.neighborhood])),(0,d.Z)([(0,u.MH)(e.city),e.state]," - ")]);return(0,r.jsx)(We,{hidden:s.some((function(t){return t===e.externalId})),isActive:I&&I.externalId===e.externalId,label:t,ariaLabel:t,subLabel:n,onClick:function(){return q(e)},hasKebab:!0,leftIcon:"synchronize-arrow",kebabActions:D(e)},e.id)}))]})},P=n(42660),I=n(45697),R=n.n(I),w=n(91768),N=n(14890),T=n(38890),A=n(40059),E=n(59387),q=n(67525),M=n(36750),Z=n(75463),D=n(57818),L=n(14622);n(54635);function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function H(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?B(e):t}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}var $=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H(this,n)}}var W={toggleAddressModalAction:A.Ec,setClickAccessPoint:D.Uy},Q=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}({},q.Z,{actions:(0,M.Z)(Object.keys(W),R().func.isRequired).isRequired}),J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(a,e);var t,n,i,o=V(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).onSignInOrUpClick=t.onSignInOrUpClick.bind(B(t)),t}return t=a,(n=[{key:"onSignInOrUpClick",value:function(){var e=this.props.actions;y.Z.clickSignInOnAddressModal(),e.toggleAddressModalAction({open:!1}),e.setClickAccessPoint(L.al),Z.Router.pushRoute(T.ROUTE_AUTHENTICATION)}},{key:"render",value:function(){var e=this.props.t;return(0,r.jsxs)("div",{className:"address-login",children:[(0,r.jsx)("span",{className:"address-login__title",children:e("login.title")}),(0,r.jsx)("span",{className:"address-login__description",children:e("login.description")}),(0,r.jsx)(E.zx,{"data-test-id":"login-button",label:e("login.action"),theme:"link",onClick:this.onSignInOrUpClick})]})}}])&&F(t.prototype,n),i&&F(t,i),a}(i.Component);J.propTypes=Q;var Y=(0,a.$j)(null,(function(e){return{actions:(0,N.DE)(W,e)}}))((0,w.Z)("address")(J)),K=n(85518),X=n(99600);n(10655);function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ee(e,t,n[t])}))}return e}({},q.Z,{canFavorite:R().bool,removeAddress:R().func,favoriteAddress:R().func}),ne=function(e){var t=e.t,n=e.canFavorite,i=e.removeAddress,o=e.favoriteAddress,a=K.UA?"tertiary":"primary";return(0,r.jsxs)("div",{className:"address-options__container",children:[(0,r.jsx)(X.Z,{color:a,icon:"trash",transparent:!0,ariaLabel:t("options.delete-button-aria-label"),onClick:i,"data-test-id":"address-options__btn-delete"}),n&&(0,r.jsx)(X.Z,{color:a,icon:"markdown-o",transparent:!0,ariaLabel:t("options.favorite-button-aria-label"),onClick:o,"data-test-id":"address-options__btn-favorite"})]})};ne.propTypes=te,ne.defaultProps={canFavorite:!1,removeAddress:null,favoriteAddress:null};(0,w.Z)("address")(ne);var re=n(67926);n(8635);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}({},q.Z,{address:R().shape({street:R().string,geoLocated:R().bool,district:R().string,streetNumber:R().oneOfType([R().string,R().number]),coords:R().shape({latitude:R().number,longitude:R().number})})}),ae=function(e){var t=e.t,n=e.address,i=n.district,o=n.street,a=n.geoLocated,s=n.streetNumber,c=!l()(n.coords);return(0,r.jsxs)("div",{className:"address-delivery-bar",children:[(0,r.jsx)("p",{className:"address-delivery-bar__title",children:t("address-delivery-title")}),(0,r.jsxs)("p",{className:"address-delivery-bar__address",children:[!c&&t("address-delivery-notice"),c&&(a?t("geo.next-to",{district:(0,u.MH)(i||o)}):(0,u.MH)((0,d.Z)([o,s])))]})]})};ae.propTypes=oe,ae.defaultProps={address:{coords:{}}};(0,re.Z)(ae,[(0,w.Z)("address"),(0,a.$j)((function(e){return{address:e.address}}))]);var se=n(94184),le=n.n(se),ce=n(74559),ue="addressListStep",de="addressSearchStep",fe="addressMapsStep",pe={"/Restaurant/Restaurant":"Restaurant Menu","/Home/HomeRestaurant":"Home","/Checkout/Checkout":"Checkout"};n(11129);function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ve={goToStep:R().func,currentStep:R().string},be={goToStep:function(){},currentStep:"addressMapStep"};function ge(e){var t=e.goToStep,n=e.currentStep,s=(0,a.I0)(),l=(0,o.$)("address").t,c=me((0,b.Z)(),1)[0],u=(0,a.v9)((function(e){return e.addressSearch.search})).selected,d=(0,a.v9)((function(e){return e.addressSearch.addressSetForConfirmation})),f=(0,a.v9)((function(e){return e.address.location.initialLoad})),p=(0,i.useState)(!1),h=p[0],m=p[1],v=JSON.stringify(null===u||void 0===u?void 0:u.addressId),g=(0,i.useCallback)((function(e){t(e),y.Z.clickAddressSearchAutocompleteAction()}),[t]);return(0,i.useEffect)((function(){d?(m(!0),t(ue)):m(!1)}),[d,t]),(0,i.useEffect)((function(){n===ue&&u&&t(fe)}),[n,t,v]),(0,i.useEffect)((function(){var e=Z.Router.router.pathname,t=pe[e];j.ZP.viewAddress({accessPoint:t,authentication:c,scheduleDeliveryAvailable:!1})}),[c]),(0,r.jsx)(Ye,{children:(0,r.jsxs)("div",{className:le()("address-list-step",{"address-list-step--with-return-button":!f,"address-list-step--centralize-content":c||d}),children:[!f&&(0,r.jsx)(E.Ei,{onClick:function(){s((0,A.Ec)({open:!1}))},icon:"arrow-down-thin",variant:"address-list-step__back-btn",transparent:!0,ariaLabel:l("common:go-back")}),(0,r.jsx)(P.Z,{forMobile:!0,forDesktop:!0}),(0,r.jsxs)("div",{className:le()("address-list-step__container",{"address-list-step__container--visible":!h,"address-list-step__container--authenticated":c}),children:[(0,r.jsx)("span",{className:"address-list-step__title",children:l("modal.title")}),(0,r.jsx)(Ke.Z,{role:"button",onClick:function(){return g(de)}}),(0,r.jsxs)(ce.Z,{expected:!1,children:[(0,r.jsx)(Pt,{}),(0,r.jsx)(Y,{})]}),(0,r.jsx)(ce.Z,{children:(0,r.jsx)(S,{})})]}),(0,r.jsx)(rn,{visible:h})]})})}ge.propTypes=ve,ge.defaultProps=be;var ye=ge,je=n(23279),xe=n.n(je),Ce=n(27361),_e=n.n(Ce),Oe=n(86997),ke=n(46220),Se=n(77849),Pe=n(18967),Ie=n(35783),Re=n(7238);n(40348);function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Te={goToStep:R().func,currentStep:R().string},Ae={goToStep:function(){},currentStep:"addressMapStep"};function Ee(e){var t=e.goToStep,s=e.currentStep,c=(0,a.v9)((function(e){return e.addressSearch.search})),u=c.query,d=void 0===u?"":u,f=c.results,p=c.selected,h=c.error,m=c.isLoading,v=(0,a.v9)((function(e){return e.addressSearch.geolocation})),b=(0,o.$)(["address"]).t,g=(0,i.useRef)(null),j=(0,a.I0)(),x=Ne((0,ke.Z)(Pe.x4),1)[0],C=(0,i.useRef)(xe()((function(e,t){if(e&&""!==e){var n=t?{lat:_e()(t,"latitude"),lng:_e()(t,"longitude")}:void 0;(0,Oe.e)(e,{onStartCallback:function(e){return j((0,Se.$n)(e))},onFailCallback:function(e){return j((0,Se.ST)(e))},onSuccessCallback:function(e){return j((0,Se.zT)(e))}},n)}else j((0,Se.q2)())}),900)),_=x&&!("google"in n.g)||h,O=(0,i.useState)(!1),k=O[0],S=O[1];(0,i.useEffect)((function(){s===ue&&j((0,Se.q2)())}),[s,j]);var I=JSON.stringify(p);(0,i.useEffect)((function(){p&&!p.geolocated?p.streetNumber?(S(!1),s!==fe&&t(fe)):S(!0):p&&p.geolocated&&t(fe)}),[s,t,I]);var R=(0,i.useCallback)((function(e){j((0,Se.h0)({query:e.description}))}),[j]),w=(0,i.useCallback)((function(){j((0,Se.q2)()),t(ue)}),[j,t]),N=(0,i.useCallback)((function(e){j((0,Se.h0)({query:_e()(p,"description",""),number:e}))}),[j,p]),T=function(){Ie.ZP.getGeo().then((function(e){var t=e.coords,n=t.latitude,r=t.longitude;j((0,Se.mt)({latitude:n,longitude:r}))}),(function(){j((0,Se.mt)(Re.$q))}))},A=Boolean(d.length>0&&f&&0===f.length&&!h&&!m),q=function(){return(0,r.jsxs)("div",{className:"no-results",children:[(0,r.jsx)(P.Z,{empty:A,forMobile:!0}),(0,r.jsx)("span",{className:"no-results__description",children:b("address-search.no-results-description")}),(0,r.jsx)(E.zx,{"data-test-id":"search-map-button",label:b("address-search.no-results-action"),theme:"link",onClick:function(){y.Z.clickAddressSearchOnMapNoResults(),T()}})]})};return(0,r.jsxs)(Ye,{children:[(0,r.jsxs)("div",{className:"address-search-step",children:[(0,r.jsx)(P.Z,{empty:A,forDesktop:!0}),(0,r.jsx)("span",{className:"address-search-step__title",children:b(A?"address-search.no-results-title":"modal.title")}),(0,r.jsx)(Ke.Z,{onSubmit:C.current,onBack:w,shouldCleanInput:s===ue,shouldFocusInput:s===de,sticky:!0}),_?(0,r.jsx)(E.Bc,{tryAgainFn:function(){return C.current(d,v)}}):(0,r.jsx)("div",{className:"address-search-step__results",children:l()(f)&&A&&!m?q():(0,r.jsx)(Xe.Z,{results:f,handleClick:R,isLoading:m,searchIsClean:A,handleSearchOnMap:T})})]}),(0,r.jsx)("div",{className:"places-container",ref:g}),(0,r.jsx)(Kt,{visible:k,handleSubmit:N,handleBackButton:function(){return S(!1)}})]})}Ee.propTypes=Te,Ee.defaultProps=Ae;var qe=Ee,Me=n(64457),Ze=(n(7827),{goToStep:R().func,currentStep:R().string}),De={goToStep:function(){},currentStep:fe},Le=function(e){var t=e.goToStep,n=e.currentStep,o=(0,a.v9)((function(e){return e.addressSearch})).search,s=(0,a.I0)();return(0,i.useEffect)((function(){var e=Z.Router.router.pathname,t=pe[e];j.ZP.viewAddressMap({accessPoint:t})}),[]),(0,r.jsx)(Me.Z,{goToStep:t,onBackMapsButton:function(){o.isEditing?(t(ue),s((0,Se.vs)())):(t(de),s((0,Se.vs)()))},isLoading:n!==fe})};Le.propTypes=Ze,Le.defaultProps=De;var Be=Le,Fe=(n(69028),{canClose:R().bool});function Ge(e){var t=e.canClose,n=(0,a.v9)((function(e){return e.addressModal})).open,o=(0,a.I0)(),s=(0,i.useCallback)((function(){o((0,A.Ec)({open:!1}))}),[o]);return(0,r.jsx)(E.u_,{animation:"bottom",isOpen:n,onRequestClose:s,type:"dialog",closeIcon:"close",variant:"address-modal",overlayClassName:"address-modal-overlay",canClose:t,children:(0,r.jsx)(E.C,{index:ue,routes:[{name:ue,component:(0,r.jsx)(ye,{})},{name:de,component:(0,r.jsx)(qe,{})},{name:fe,component:(0,r.jsx)(Be,{})}]})})}Ge.propTypes=Fe,Ge.defaultProps={canClose:!0};var Ue=Ge;n(96723);function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze={onClick:R().func,label:R().string,subLabel:R().string,leftIcon:R().node,hasKebab:R().bool,ariaLabel:R().string,variant:R().string,isActive:R().bool,hidden:R().bool,kind:R().oneOf(["default","simple"]),kebabActions:R().shape({editCallback:R().func,deleteCallback:R().func}),disabled:R().bool},$e={onClick:void 0,label:void 0,subLabel:void 0,leftIcon:void 0,hasKebab:!1,isActive:!1,hidden:!1,variant:void 0,ariaLabel:"",kind:"default",kebabActions:{},disabled:!1};function Ve(e){var t=e.label,n=e.onClick,a=e.ariaLabel,s=e.leftIcon,l=e.subLabel,c=e.hasKebab,u=e.variant,d=e.isActive,f=e.hidden,p=e.kind,h=e.kebabActions,m=e.disabled,v=(0,i.useRef)(null),b=(0,i.useState)(!1),g=b[0],y=b[1],j=(0,i.useState)(!1),x=j[0],C=j[1],_=(0,i.useState)(!1),O=_[0],k=_[1],S=function(e){v.current&&!v.current.contains(e.target)&&(y(!1),k(!1))},P=(0,o.$)(["address"]).t;(0,i.useEffect)((function(){document[g?"addEventListener":"removeEventListener"]("click",S)}),[g]),(0,i.useEffect)((function(){if(f){var e=setTimeout((function(){C(!0)}),200);return function(){return clearTimeout(e)}}return function(){}}),[f]);var I,R=function(e,t){e.stopPropagation(),t(e)};return(0,r.jsxs)("div",{className:le()("btn-address",(I={},He(I,"".concat(u),u),He(I,"btn-address--".concat(p),!0),He(I,"btn-address__container",!0),He(I,"btn-address--is-open-actions",g),He(I,"btn-address--is-active",d),He(I,"btn-address--hidden",f),He(I,"btn-address--display-none",x),He(I,"btn-address--disabled",m),I)),ref:v,children:[(0,r.jsx)("button",{className:"btn-address--full-size",onClick:n,"aria-label":a}),(0,r.jsxs)("div",{className:"btn-address__icon--left",children:[(0,r.jsx)("div",{className:le()("btn-address__icon-actions",{"btn-address__icon-actions--delete-confirming":O}),children:g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"aria-label":P("options.edit-button-aria-label"),onClick:function(e){return R(e,h.editCallback)},className:"btn-address--btn-actions",children:(0,r.jsx)(E.JO,{className:"btn-address__icon-action",name:"pen"})}),(0,r.jsx)("button",{"aria-label":P("options.delete-button-aria-label"),onClick:function(){return k(!0)},className:"btn-address--btn-actions",children:(0,r.jsx)(E.JO,{className:"btn-address__icon-action",name:"trash"})}),(0,r.jsx)("button",{"aria-label":P("options.delete-button-confirm-aria-label"),onClick:function(e){return R(e,h.deleteCallback)},className:"btn-address__delete-confirmation",children:(0,r.jsx)(E.JO,{name:"confirm"})}),(0,r.jsx)("button",{onClick:function(){return k(!1)},"aria-label":P("options.delete-button-cancel-aria-label"),className:"btn-address__delete-confirmation",children:(0,r.jsx)(E.JO,{name:"error"})})]})}),!g&&s&&(0,r.jsx)(E.JO,{className:"btn-address__icon-initial",name:s})]}),(0,r.jsxs)("div",{className:"btn-address__info",children:[(0,r.jsx)("span",{className:"btn-address__info--label",children:t}),l&&(0,r.jsx)("span",{className:"btn-address__info--description",children:l})]}),c&&(0,r.jsx)("button",{className:"btn-address__icon--right","aria-label":P("options.show-button-aria-label"),onClick:function(e){e.stopPropagation(),y(!g),k(!1)},children:(0,r.jsx)(E.JO,{name:"more-dots"})})]})}Ve.propTypes=ze,Ve.defaultProps=$e;var We=Ve,Qe=n(17606),Je=(n(88579),function(e){var t=e.children;return(0,r.jsx)(Qe.in,{children:(0,r.jsx)("div",{className:"address-step-shell",children:t})})});Je.propTypes={children:R().node.isRequired};var Ye=Je,Ke=n(36991),Xe=n(62794),et=n(37054),tt=n(74691),nt=n.n(tt),rt=(n(36867),{active:R().bool}),it=function(e){var t=e.active,n=(0,o.$)("address").t;return(0,r.jsxs)("div",{className:le()("address-maps-message",{"address-maps-message--active":t}),children:[(0,r.jsx)("span",{className:"address-maps-message__title",children:n("maps.baloon-title")}),(0,r.jsx)("span",{className:"address-maps-message__subtitle",children:n("maps.baloon-subtitle")})]})};it.propTypes=rt,it.defaultProps={active:!1};var ot=it,at=(n(93137),{handleBackButton:R().func,isLoading:R().bool}),st={handleBackButton:void 0,isLoading:!1},lt=function(e){var t=e.handleBackButton,n=e.isLoading,i=(0,o.$)("common").t;return(0,r.jsxs)("div",{className:"address-maps-header",children:[(0,r.jsx)(E.Ei,{icon:"arrow-left-thin",variant:"address-maps-header__back-btn",transparent:!0,onClick:t,ariaLabel:i("go-back")}),(0,r.jsx)("div",{className:"address-maps-header__description",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"address-maps-header__title--placeholder ph-loading"}),(0,r.jsx)("span",{className:"address-maps-header__subtitle--placeholder ph-loading"})]}):(0,r.jsx)("span",{className:"address-maps-header__title",children:i("address")})})]})};lt.propTypes=at,lt.defaultProps=st;var ct=lt,ut=JSON.parse('[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#797979"}]},{"featureType":"administrative","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"saturation":-25}]},{"featureType":"landscape.man_made","elementType":"geometry.stroke","stylers":[{"lightness":15}]},{"featureType":"poi","elementType":"labels.icon","stylers":[{"color":"#c0c0c0"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#b2b1b3"}]},{"featureType":"poi","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"},{"visibility":"off"}]},{"featureType":"poi.business","elementType":"geometry.stroke","stylers":[{"lightness":25}]},{"featureType":"poi.medical","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"poi.place_of_worship","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"poi.school","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"road","elementType":"labels.icon","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"color":"#f0f0f0"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#8b8b8c"}]},{"featureType":"road.arterial","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#fef5c2"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#faeba8"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#d3a35d"}]},{"featureType":"road.highway","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"geometry.stroke","stylers":[{"color":"#f0f0f0"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#919191"}]},{"featureType":"road.local","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"}]},{"featureType":"transit","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit.station","elementType":"labels.text.fill","stylers":[{"color":"#a6a6a6"}]},{"featureType":"transit.station","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#b3e5fb"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#589bc8"}]}]'),dt=(n(92630),n(7565),{message:R().string}),ft={message:void 0},pt=function(e){var t=e.message;return(0,r.jsxs)("div",{className:le()("address-maps-toast",{"address-maps-toast--active":Boolean(t)}),children:[(0,r.jsx)(E.JO,{name:"warning"}),t]})};pt.propTypes=dt,pt.defaultProps=ft;var ht=pt,mt={position:R().shape({lat:R().number,lng:R().number}),geoPosition:R().shape({lat:R().number,lng:R().number}),onDragEnd:R().func,handleGeoLocation:R().func,toastMessage:R().string,disabled:R().bool,canSubmit:R().bool,handleBackButton:R().func,handleSubmit:R().func,isLoading:R().bool,showFocusButton:R().bool,isModalAddressNotFoundOpen:R().bool,setModalOpen:R().func},vt={position:void 0,geoPosition:void 0,onDragEnd:void 0,handleGeoLocation:void 0,toastMessage:void 0,disabled:!1,canSubmit:!0,handleBackButton:void 0,handleSubmit:void 0,isLoading:!0,showFocusButton:!0,isModalAddressNotFoundOpen:!1,setModalOpen:void 0},bt=function(e){var t=e.position,n=e.geoPosition,a=e.onDragEnd,s=e.handleGeoLocation,l=e.toastMessage,c=e.disabled,u=e.canSubmit,d=e.handleBackButton,f=e.handleSubmit,p=e.isLoading,h=e.showFocusButton,m=e.isModalAddressNotFoundOpen,v=e.setModalOpen,b=t||n||Re.Bg,g=(0,o.$)("address").t,y=(0,i.useRef)(null),j=(0,i.useState)(t),x=j[0],C=j[1],_=(0,i.useState)(16),O=_[0],k=_[1],S=(0,i.useState)(!1),P=S[0],I=S[1],R=(0,i.useCallback)((function(e){y.current&&!P&&null!=(null===e||void 0===e?void 0:e.lat)&&null!=(null===e||void 0===e?void 0:e.lng)&&y.current.panTo(e)}),[P]),w=(0,i.useCallback)((function(e){if(!c){var t=nt()(O+e,4,20);k(t)}}),[O,c]),N=(0,i.useCallback)(xe()((function(e){var t=e.lat,n=e.lng;"function"===typeof a&&a({lat:t,lng:n})}),550),[a]);(0,i.useEffect)((function(){var e=function(e){e.deltaY>1?w(-.25):w(.25)};return window.addEventListener("mousewheel",e,!0),function(){window.removeEventListener("mousewheel",e,!0)}}),[w]),(0,i.useEffect)((function(){t!==x&&(R(t),C(t))}),[R,t,x]);var T=(0,i.useCallback)((function(e){y.current=e}),[]);return(0,r.jsxs)("div",{className:"address-maps__map",children:[(0,r.jsx)(et.b6,{zoom:Math.round(O),center:b,options:{disableDefaultUI:!0,styles:ut,draggable:!c,gestureHandling:K.tq?"greedy":void 0,backgroundColor:"#fff",scrollwheel:!1,disableDoubleClickZoom:!0},clickableIcons:!1,onDragStart:function(){return I(!0)},onDragEnd:function(){I(!1)},onCenterChanged:function(){y.current&&N({lat:y.current.getCenter().lat(),lng:y.current.getCenter().lng()})},onLoad:T,mapContainerClassName:"address-maps__container",children:n&&!c&&(0,r.jsx)(et.xT,{position:n,mapPaneName:et.xT.OVERLAY_MOUSE_TARGET,children:(0,r.jsx)("div",{className:"address-maps__geo"})})}),(0,r.jsx)(E.JO,{name:"pin",className:le()("address-maps__pin",{"address-maps__pin--active":P})}),!c&&!P&&h&&(0,r.jsx)(E.Ei,{ariaLabel:g("maps.center-map"),icon:"location",color:"white",variant:"address-maps__focus-button",onClick:function(){!n&&s?s((function(e){return R(e)}),(function(){return R(b)})):R(n||b)}}),(0,r.jsx)(ct,{handleBackButton:d,isLoading:p}),!c&&(0,r.jsx)(ot,{active:!P}),!c&&!P&&(0,r.jsx)(ht,{message:l}),!c&&!P&&(0,r.jsx)(E.zx,{tabIndex:"0",color:"primary",disabled:!u||p,label:g("maps.confirm-localization"),type:"submit",variant:"address-maps__submit",onClick:f}),(0,r.jsx)(E.u_,{isOpen:m,type:"dialog",overlayClassName:"address-modal-overlay",onRequestClose:function(){return v("modalAddressNotFound",!1)},children:(0,r.jsxs)("div",{className:"address-maps__modal",children:[(0,r.jsx)("h4",{children:g("maps.not-found-modal.title")}),(0,r.jsx)("p",{children:g("maps.not-found-modal.message")}),(0,r.jsx)(E.zx,{label:g("common:confirm"),ariaLabel:g("common:confirm"),onClick:function(){return v("modalAddressNotFound",!1)},fullWidth:!0})]})})]})};bt.propTypes=mt,bt.defaultProps=vt;var gt=bt,yt=n(34051),jt=n.n(yt),xt=n(32245),Ct=n(92455),_t=n(20861);function Ot(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}var kt={kind:R().string};function St(e){var t=e.kind,n=(0,o.$)(["address"]).t,s=(0,a.v9)((function(e){return e.addressSearch.search})).softAddress,l=(0,a.I0)(),c=(0,i.useState)(!1),u=c[0],d=c[1],f=(0,a.v9)((function(e){return e.contextCard.checkout.isOpened})),p=(0,_t.Z)().updateGeoPoint,h="/Checkout/Checkout"!==_e()(Z.Router,"router.pathname")&&!f;(0,i.useEffect)((function(){l((0,xt.SN)())}),[l]);var m,v=(0,i.useCallback)((m=jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.Z.clickGeolocation(),d(!0),e.prev=3,e.next=6,Ct.Z.getPosition();case 6:if(!(t=e.sent.coords)){e.next=11;break}p(t),y.Z.callbackFromGeolocation(!0),l((0,xt.SN)(!0,t)),e.next=12;break;case 11:throw new Error("undefined coords");case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),d(!1),y.Z.callbackFromGeolocation(!1),"User denied Geolocation"===e.t0.message&&l((0,g.PJ)({message:n("geo.blocked")}));case 19:case"end":return e.stop()}}),e,null,[[3,14]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=m.apply(e,t);function o(e){Ot(i,n,r,o,a,"next",e)}function a(e){Ot(i,n,r,o,a,"throw",e)}o(void 0)}))}),[l,n,p]);return(0,r.jsx)(We,{className:le()("btn-use-address",{"btn-use-address--hidden":!h}),disabled:u,onClick:v,kind:t,hasKebab:!1,label:n("geo.button-label"),ariaLabel:n("geo.button-label"),leftIcon:"location",subLabel:s&&n("geo.next-to",{district:s.neighborhood||(null===s||void 0===s?void 0:s.streetName)})})}St.propTypes=kt,St.defaultProps={kind:"default"};var Pt=St,It=n(74231),Rt=n(82580),wt=n(7058),Nt=n(35183),Tt=n(79499),At=n(46325),Et=n(68212);n(5845);function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mt(e,t,n[t])}))}return e}function Dt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R().string;return R().shape({number:e,complement:e,reference:e})},Bt={errors:Lt().isRequired,isValid:R().bool,touched:Lt(R().bool).isRequired,values:Lt(R().string.isRequired).isRequired,setFieldValue:R().func.isRequired,handleChange:R().func.isRequired,handleBlur:R().func.isRequired},Ft={isValid:!1},Gt=function(e){var t=e.goToStep,n=(0,o.$)(["address"]).t,s=(0,a.v9)((function(e){return e.addressSearch})),l=s.search,c=s.states,f=(0,a.v9)((function(e){return e.address})).isLoading,p=(0,a.I0)(),m=_e()(l,"isEditing"),v=!m&&(-1===_e()(l,"selected.quality.streetName",-1)||-1===_e()(l,"selected.quality.neighborhood",-1)||!_e()(l,"selected.street",!1)||!_e()(l,"selected.district",!1)),b=!m&&(-1===_e()(l,"selected.quality.city",-1)||-1===_e()(l,"selected.quality.state",-1)||!_e()(l,"selected.state",!1)||!_e()(l,"selected.city",!1)),g=_e()(l,"selected");(0,i.useEffect)((function(){b&&(p((0,At.Hp)()),g&&p((0,At.$p)(g.state))),!g&&m&&t(ue)}),[b,p,g,m,t]);var y={containerRef:(0,i.useRef)(),inputRefs:{cityState:(0,i.useRef)(),districtStreet:(0,i.useRef)(),numberComplement:(0,i.useRef)(),reference:(0,i.useRef)()}};if(!g||l.isLoadingSelected)return null;var x=function(e){var t=e.values,o=e.touched,a=e.errors,s=e.isValid,u=e.setFieldValue,h=e.handleChange,m=e.handleBlur,g=function(e){return u("favorite",t.favorite===e?void 0:e)},j=(0,d.Z)([_e()(l,"selected.street"),_e()(l,"selected.streetNumber")]),x=(0,d.Z)([(0,d.Z)([_e()(l,"selected.district"),_e()(l,"selected.city")]),_e()(l,"selected.state")]," - "),C=function(e){p((0,At.$p)(e)),u("city","")},_=[{value:"",label:""}].concat(Dt(c.options)),O=_e()(c.cities[t.state],"options",[]),k=[{value:"",label:""}].concat(Dt(O)),S=y.containerRef,P=y.inputRefs,I=Object.keys(a)[0];return(0,i.useEffect)((function(){I&&function(e,t){var n,r=t.containerRef,i=t.inputRefs;switch(e){case"city":case"state":n=i.cityState.current;break;case"district":case"street":n=i.districtStreet.current;break;case"number":case"complement":n=i.numberComplement.current}var o=n?n.offsetTop-n.offsetHeight:0;r.current&&r.current.scrollTo({top:o,behavior:"smooth"})}(I,y)}),[I]),(0,r.jsx)(Qe.in,{children:(0,r.jsxs)("div",{className:"complete-address",ref:S,children:[(0,r.jsxs)("div",{className:"complete-address__address-info",children:[(0,r.jsx)("p",{className:"complete-address__street-label",children:j}),(0,r.jsx)("p",{className:"complete-address__state-label",children:x})]}),(0,r.jsxs)(Rt.l0,{className:"complete-address__form",children:[b&&(0,r.jsxs)("div",{className:"complete-address--city-state",ref:P.cityState,children:[(0,r.jsx)(wt.px,{name:"state",label:n("address.state-label"),error:o.state&&a.state,value:t.state,ariaLabel:n("address.state-aria-label"),options:_,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,Dt(t)),C(t[0].target.value)},onBlur:m}),(0,r.jsx)(wt.px,{name:"city",label:n("address.city-label"),error:o.city&&a.city,value:t.city,ariaLabel:n("address.city-aria-label"),options:k,onChange:h,onBlur:m})]}),v&&(0,r.jsxs)("div",{className:"complete-address--district-street",ref:P.districtStreet,children:[(0,r.jsx)(wt.II,{name:"district",type:"text",label:n("address.district-label"),error:o.district&&a.district,value:t.district,ariaLabel:n("address.district-aria-label"),autoComplete:"address-district-ifood"}),(0,r.jsx)(wt.II,{name:"street",type:"text",label:n("address.street-label"),error:o.street&&a.street,value:t.street,ariaLabel:n("address.street-aria-label"),autoComplete:"address-street-ifood"})]}),(0,r.jsxs)("div",{className:"complete-address--number-complement",ref:P.numberComplement,children:[(0,r.jsx)(wt.II,{name:"number",type:"text",label:n("address.streetNumber-label"),error:o.number&&a.number,value:t.number,ariaLabel:n("address.street-number-aria-label"),autoComplete:"address-number-ifood"}),(0,r.jsx)(wt.II,{name:"complement",type:"text",label:n("address.complement-label"),error:o.complement&&a.complement,value:t.complement,ariaLabel:n("address.complement-aria-label"),helpText:n("address.complement-help-text"),autoComplete:"address-complement-ifood"})]}),(0,r.jsx)("div",{className:"complete-address--reference-point",ref:P.reference,children:(0,r.jsx)(wt.II,{name:"reference",type:"text",label:n("address.reference-label"),error:o.reference&&a.reference,value:t.reference,ariaLabel:n("address.reference-aria-label"),autoComplete:"address-reference-ifood"})}),(0,r.jsxs)("div",{className:"complete-address--favorites",children:[(0,r.jsx)("p",{children:n("favorite-label")}),(0,r.jsxs)("div",{className:"complete-address--favorites-btn",children:[(0,r.jsx)(E.zx,{variant:le()("complete-address__favorite",{"complete-address__favorite--active":t.favorite===Tt.S5}),icon:"house",theme:"transparent",iconPosition:"left",onClick:function(){return g(Tt.S5)},label:n("home.button-label"),ariaLabel:n("home.button-label")}),(0,r.jsx)(E.zx,{variant:le()("complete-address__favorite",{"complete-address__favorite--active":t.favorite===Tt.so}),icon:"coffee-cup",theme:"transparent",iconPosition:"left",onClick:function(){return g(Tt.so)},label:n("workplace.button-label"),ariaLabel:n("workplace.button-label")})]})]}),(0,r.jsx)("div",{className:"complete-address--save-btn",children:(0,r.jsx)(E.zx,{disabled:!s||f||(0,Nt.x)(a),fullWidth:!0,type:"submit",isLoading:f||l.isLoadingEditing,label:n("form-button.save-address")})})]})]})})};return x.propTypes=Bt,x.defaultProps=Ft,(0,r.jsx)(Rt.J9,Zt({},function(e){var t=e.t,n=e.selectedAddress,r=void 0===n?{}:n,i=e.dispatch,o=e.displayStreetAndDistrict,a=e.displayStateAndCity,s=e.isEditing;return{initialValues:{number:_e()(r,"streetNumber","")||void 0,complement:_e()(r,"compl","")||void 0,reference:_e()(r,"reference","")||void 0,district:_e()(r,"district","")||void 0,street:_e()(r,"street","")||void 0,city:(0,u.MH)((0,Et.Bc)(_e()(r,"city",""))),state:_e()(r,"state","")||void 0,favorite:_e()(r,"alias")?_e()(r,"alias").toLowerCase():void 0},validationSchema:function(){var e=_e()(r,"rules",[]),n=e.find((function(e){return"complement"===e.key})),i=e.find((function(e){return"reference"===e.key}));return It.Ry().shape({number:It.Z_().required(t("address.empty-number")),district:o?It.Z_().required(t("address.empty-district")):It.Z_().notRequired(),street:o?It.Z_().required(t("address.empty-street")):It.Z_().notRequired(),city:a?It.Z_().required(t("address.empty-city")):It.Z_().notRequired(),state:a?It.Z_().required(t("address.empty-state")):It.Z_().notRequired(),complement:_e()(n,"required",!1)?It.Z_().required(t("address.empty-complement")):It.Z_().notRequired(),reference:_e()(i,"required",!1)?It.Z_().required(t("address.empty-reference")):It.Z_().notRequired()})},onSubmit:function(e){var t=Zt({},r,{complement:_e()(e,"complement"),reference:_e()(e,"reference"),streetNumber:_e()(e,"number"),alias:_e()(e,"favorite"),district:_e()(e,"district"),street:_e()(e,"street"),city:_e()(e,"city"),state:_e()(e,"state")});j.ZP.updateGeoPoint(Zt({},t.coords)),i(s?(0,h.dV)(t):(0,h.QN)(t))},isInitialValid:!0}}({t:n,selectedAddress:g,dispatch:p,displayStreetAndDistrict:v,displayStateAndCity:b,isEditing:m}),{children:function(e){return x(e)}}))};Gt.propTypes={goToStep:R().func.isRequired};var Ut=Gt;n(78198);function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ht(e,t,n[t])}))}return e}var $t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R().string,t=arguments.length>1?arguments[1]:void 0;return R().shape(zt({number:e,addressEmptyNumber:e},t))},Vt={handleSubmit:R().func.isRequired},Wt=function(e){var t=e.handleSubmit,n=(0,o.$)("address").t,i=(0,a.v9)((function(e){return e.addressSearch})).search,s=i.selected||{},l=s.name,c=s.district,u=s.city,f=s.state,p={initialValues:function(e){var t=e.number,n=void 0===t?"":t,r=e.addressEmptyNumber;return{number:n,addressEmptyNumber:void 0!==r&&r}},initialErrors:{number:n("address.empty-number")},validationSchema:function(){return It.Ry().shape({addressEmptyNumber:It.Xg().notRequired(),number:It.Z_().when("addressEmptyNumber",{is:function(e){return!1===e||void 0===e},then:It.Z_().required(n("address.empty-number")),otherwise:It.Z_().notRequired()})})},onSubmit:function(e){t(e.addressEmptyNumber?"s/n":e.number)}},h=function(e){var t=e.values,o=e.touched,a=e.errors,s=e.isValid,p=e.setFieldValue;return(0,r.jsxs)(Rt.l0,{className:"address-number__form",children:[(0,r.jsxs)("div",{className:"address-number__address-info",children:[(0,r.jsx)("p",{className:"street-name",children:l}),(0,r.jsx)("p",{className:"district",children:(0,d.Z)([(0,d.Z)([c,u]),f]," - ")})]}),(0,r.jsx)("div",{className:"address-number__input",children:(0,r.jsx)(wt.II,{autoFocus:!0,name:"number",type:"text",label:n("address.streetNumber-label"),error:o.number&&!s&&a.number?a.number:void 0,disabled:t.addressEmptyNumber,value:t.number||"",ariaLabel:n("address.street-number-aria-label")})}),(0,r.jsxs)("label",{id:"address-number__checkbox-label",htmlFor:"addressEmptyNumber",className:"address-number__checkbox-label",children:[(0,r.jsx)("span",{className:"address-number__empty-number",children:n("address-number.empty-number")}),(0,r.jsx)(wt.XZ,{className:"address-number__checkbox",ariaLabelledBy:"address-number__checkbox-label",id:"addressEmptyNumber",name:"addressEmptyNumber",size:"small",onChange:p})]}),(0,r.jsx)(E.zx,{disabled:!s||i.isLoadingSelected,type:"submit",fullWidth:!0,isLoading:i.isLoadingSelected,label:t.addressEmptyNumber?n("address-number.action-without"):n("address-number.action-with")})]})};return h.propTypes={errors:$t().isRequired,isValid:R().bool.isRequired,touched:$t(R().bool).isRequired,values:$t(R().string.isRequired,{number:R().string,addressEmptyNumber:R().bool}).isRequired,setFieldValue:R().func.isRequired},(0,r.jsx)(Rt.J9,zt({},p,{children:function(e){return h(e)}}))};Wt.propTypes=Vt;var Qt=Wt,Jt=(n(28556),{handleBackButton:R().func.isRequired,handleSubmit:R().func.isRequired,visible:R().bool.isRequired}),Yt=function(e){var t=e.handleBackButton,n=e.visible,i=e.handleSubmit,a=(0,o.$)("address").t;return(0,r.jsxs)("div",{className:le()("address-number",{"address-number--visible":n}),children:[(0,r.jsx)(E.Ei,{onClick:t,icon:"arrow-left-thin",variant:"address-number__back-btn",transparent:!0,ariaLabel:a("common:go-back")}),(0,r.jsxs)("div",{className:"address-number__form-wrapper",children:[(0,r.jsx)("p",{className:"address-number__title",children:a("address-number.title".concat(K.UA?"-mobile":""))}),n&&(0,r.jsx)(Qt,{handleSubmit:i})]})]})};Yt.propTypes=Jt;var Kt=Yt,Xt=n(45881),en=n(54552),tn=(n(63837),{visible:R().bool.isRequired});function nn(e){var t=e.visible,n=(0,a.I0)(),s=(0,o.$)("address").t,l=(0,a.v9)((function(e){return e.addressSearch.addressSetForConfirmation})),c=(0,a.v9)((function(e){var t=e.checkout;return t[t.currentRestaurant]})),u=(0,i.useCallback)((function(){en.ZP.saveCoordsCookies(l.coords),n((0,h.Xw)(l)),n((0,Xt.CP)()),n((0,h.tU)(null)),n((0,A.Ec)({open:!1}))}),[l,n]),d=(0,i.useCallback)((function(){n((0,h.tU)(null))}),[n]);return(0,r.jsxs)("div",{className:le()("address-set-confirmation",{"address-set-confirmation--visible":t}),children:[(0,r.jsxs)("div",{className:"address-set-confirmation__title",children:[(0,r.jsx)("span",{className:"address-set-confirmation__title--name",children:_e()(c,"restaurant.name")}),(0,r.jsx)("span",{className:"address-set-confirmation__title--message",children:s("address-set-confirmation.title")})]}),(0,r.jsx)("span",{className:"address-set-confirmation__subtitle",children:s("address-set-confirmation.subtitle")}),(0,r.jsx)(E.zx,{variant:"address-set-confirmation__accept-btn",tabIndex:"0",color:"primary",fullWidth:!0,label:s("address-set-confirmation.accept"),type:"button",onClick:u}),(0,r.jsx)(E.zx,{theme:"link",tabIndex:"0",color:"white",fullWidth:!0,label:s("address-set-confirmation.reject"),type:"button",onClick:d})]})}nn.propTypes=tn;var rn=nn},46220:function(e,t,n){"use strict";var r=n(67294),i=[];t.Z=function(e){var t=(0,r.useState)({loaded:!1,error:!1}),n=t[0],o=t[1],a=function(){o({loaded:!0,error:!1})};return(0,r.useEffect)((function(){if(i.includes(e)){if(document.querySelector('script[src="'.concat(e,'"]')))return o({loaded:!0,error:!1}),function(){};var t=i.indexOf(e);i.splice(t,1)}var n=document.createElement("script");n.src=e,n.async=!0,n.defer=!0;var r=function(){var t=i.indexOf(e);t>=0&&i.splice(t,1),n.remove(),o({loaded:!0,error:!0})};return n.addEventListener("load",a),n.addEventListener("error",r),document.body.appendChild(n),i.push(e),function(){n.removeEventListener("load",a),n.removeEventListener("error",r)}}),[e]),[n.loaded,n.error]}},50959:function(e,t,n){"use strict";n.r(t),n.d(t,{Layout:function(){return X},default:function(){return ee}});var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(94184),l=n.n(s),c=n(14416),u=n(14890),d=n(9008),f=n(91768),p=n(5152),h=n(57818),m=n(5793),v=n(30548),b=n(65857),g=n(77159),y=n(59387),j=n(36750),x=n(67926),C=n(67525),_=n(19995),O=n(59619),k=n(66198),S=n(56301),P=n(18967),I=n(52668),R=n(10902),w=n(42383),N=n(32754);var T=n(26793),A=n(96983);var E=n(95528),q=function(e){var t;return null===(t=e.addressInvalidDialog)||void 0===t?void 0:t.open},M=function(){var e=(0,c.I0)(),t=(0,c.v9)(q),n=function(){var e,t=null!==(e=(0,c.v9)(w.jW))&&void 0!==e?e:{},n=t.district,r=t.city,i=t.state;return(0,N.Z)([n,r,i].filter(Boolean)," - ")}(),o=function(){var e=(0,T.$)("restaurant").t,t=(0,c.v9)(A.wx),n=t.district,r=t.address,i=t.geoLocated,o=t.streetNumber;return i?e("address:geo.next-to",{district:n||r}):(0,N.Z)([r,o])}(),a=(0,i.useCallback)((function(){return e((0,E.hO)())}),[e]);return(0,r.jsx)(R.Z,{isOpen:t,deliveryAddress:o,onRequestClose:a,restaurantAddress:n})},Z=n(17122),D=n(63594);n(68532),n(677);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function G(e,t){return!t||"object"!==H(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}var H=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G(this,n)}}var $=(0,p.default)(Promise.all([n.e(296),n.e(5968),n.e(6582),n.e(4450),n.e(5393),n.e(6066),n.e(3994),n.e(6443),n.e(2606)]).then(n.bind(n,52606)),{loadableGenerated:{webpack:function(){return[52606]}},ssr:!1}),V=(0,p.default)(n.e(159).then(n.bind(n,60159)).then((function(e){return e.ChatContainer})),{loadableGenerated:{webpack:function(){return[60159]}},ssr:!1}),W=(0,p.default)(Promise.resolve().then(n.bind(n,80629)).then((function(e){return e.default})),{loadableGenerated:{webpack:function(){return[80629]}},ssr:!1}),Q=(0,p.default)(n.e(1175).then(n.bind(n,21175)).then((function(e){return e.default})),{loadableGenerated:{webpack:function(){return[21175]}},ssr:!1}),J={setRouteChange:h.DE,fetchUserIp:m.HI,setTestModeCookie:v.cl,fetchMultiCategoriesRequest:D.bi},Y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}({},C.Z,{actions:(0,j.Z)(Object.keys(J),a().func.isRequired).isRequired,testSession:a().bool.isRequired,children:a().node,showCheckoutContextCard:a().bool,theme:a().string,staticHeader:a().bool,hiddenHeader:a().bool,tabBar:a().string,hiddenTabBar:a().bool,hideAddressModal:a().bool,hideCatalogItemModal:a().bool,hideChat:a().bool,hiddenGlobalSearch:a().bool,title:a().string,description:a().string,hiddenCategories:a().bool,disabledRedirect:a().bool}),K={children:null,showCheckoutContextCard:!1,theme:void 0,staticHeader:!1,hiddenHeader:!1,tabBar:void 0,hiddenTabBar:!1,hideAddressModal:!1,hideCatalogItemModal:!1,hideChat:!1,hiddenGlobalSearch:!1,title:void 0,description:void 0,hiddenCategories:!1,disabledRedirect:!1},X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,e);var t,n,i,o=z(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).autoScrollTimed=null,e}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.hasAddress,n=e.hasMultiCategories;this.onCheckToken(),this.defineTestMode(),t&&!n&&this.fetchDynamicMultiCategories(),document&&((0,k.Z)(0,0),this.autoScrollTimed=setTimeout((function(){(0,O.OI)("scroll-smooth")}),1e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoScrollTimed)}},{key:"onCheckToken",value:function(){this.props.actions.fetchUserIp()}},{key:"fetchDynamicMultiCategories",value:function(){this.props.actions.fetchMultiCategoriesRequest()}},{key:"defineTestMode",value:function(){var e=this.props,t=e.actions,n=e.testSession;t.setTestModeCookie(n)}},{key:"render",value:function(){var e,t=this.props,n=t.children,i=t.showCheckoutContextCard,o=t.theme,a=t.staticHeader,s=t.hiddenHeader,c=t.testSession,u=t.t,f=t.tabBar,p=t.hiddenTabBar,h=t.hasAddress,m=t.hideAddressModal,v=t.hideCatalogItemModal,j=t.hideChat,x=t.hiddenGlobalSearch,C=t.title,_=void 0===C?u("seo:title.general"):C,O=t.description,k=void 0===O?u("seo:description.message"):O,R=t.hiddenCategories,w=t.disabledRedirect;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(d.default,{children:[(0,r.jsx)("title",{children:c?u("seo:title.general-test"):_},"title"),(0,r.jsx)("meta",{name:"description",content:k},"description"),(0,r.jsx)("meta",{property:"og:image",content:(0,P.QW)(I.el.WEBAPP_ASSETS,"logo-ifood.png",I.zf.HIGHT)}),(0,r.jsx)("meta",{httpEquiv:"Content-Security-Policy",content:"script-src 'self' 'unsafe-eval' 'sha256-6Y3BWCmu5UkWbZSnp0Gw77+qEVX0LHiVxcWU38Xssko=' 'sha256-CN/ADnIp5tfG8VrtOf8QQQWYz+RtJKsxglWizFQ9xak=' 'sha256-wjKIJ+FAtdkIsk2O1HIXTkIsDVCkoXZo0NWUwu6irUM=' 'sha256-x4Qdhzxgfd96pB77qI3pNsfCI+ThPSMbR5UweCFOgTY=' 'sha256-YATHk2WG5d/lY4uQFcr8KNDZzvPXMCb4HtxHjlWOUPU=' 'sha256-3Kbq0HPkSliInv1tsWr27jEHafcqRF6H9trr9C44p70=' 'sha256-xvqtnks2S6U9Pfaf8vwatet+dC3LH11KRSmzXieuIYw=' 'sha256-XBhYmqxdvXa+zOlOFomuYIucgol+4QN5EOzVeUW+cVo=' 'sha256-gbl2KmZzGTyKYkAPoSFTg5SIUJYFaGqMI8gnNtth0oA=' https:;"})]}),(0,r.jsx)(y.Cm,{}),(0,r.jsx)(y.zP,{max:"desktop",allowSSR:!1,children:i&&(0,r.jsx)($,{hasTabBarSpacing:!p})}),(0,r.jsx)(y.zP,{min:"tablet",children:!s&&(0,r.jsx)(W,{isStatic:a,isHidden:x,hiddenCategories:R,disabledRedirect:w})}),(0,r.jsx)("main",{className:l()("main-layout",(e={},B(e,"main-layout--".concat(o),o),B(e,"main-layout--with-home-button",(0,S.Z)()),e)),children:n}),!j&&(0,r.jsx)(V,{}),!m&&(0,r.jsx)(b.qo,{canClose:h}),(0,r.jsx)(y.zP,{max:"desktop-s",children:!p&&(0,r.jsx)(Q,{activeTab:f})}),(0,r.jsx)(g.Z,{}),(0,r.jsx)(M,{}),!v&&(0,r.jsx)(Z.Z,{})]})}}])&&L(t.prototype,n),i&&L(t,i),a}(i.Component);X.propTypes=Y,X.defaultProps=K;var ee=(0,x.Z)(X,[(0,c.$j)((function(e){var t,n,r;return{testSession:(0,_.Z)(e),hasAddress:Boolean((null===(t=e.address.coords)||void 0===t?void 0:t.latitude)&&(null===(n=e.address.coords)||void 0===n?void 0:n.longitude)&&!(null===(r=e.address.location)||void 0===r?void 0:r.initialLoad)),hasMultiCategories:Boolean(e.multiCategories.categories)}}),(function(e){return{actions:(0,u.DE)(J,e)}})),(0,f.Z)()])},53773:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(e){return[null===(t=Array.isArray(null===e||void 0===e?void 0:e.borderBoxSize)?null===e||void 0===e?void 0:e.borderBoxSize[0]:null===e||void 0===e?void 0:e.borderBoxSize)||void 0===t?void 0:t.inlineSize,null===t||void 0===t?void 0:t.blockSize];var t}},86213:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(52843),i=new r.K((function(e){return new ResizeObserver(e)}));function o(e,t){return(0,r.Z)(i,e,t)}},12615:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(52843),i=new r.K((function(e){return new IntersectionObserver(e)}));function o(e,t){return(0,r.Z)(i,e,t)}},52843:function(e,t,n){"use strict";n.d(t,{K:function(){return s},Z:function(){return l}});var r=n(67294),i=n(18446),o=n.n(i);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=new Map,this.defaultSelector=function(e){return e},this.initializer=t}var t,n,r;return t=e,(n=[{key:"observer",get:function(){if(!this.observerHolder){var e=this;this.observerHolder=this.initializer((function(t){return t.forEach((function(t){var n;e.listeners&&(n=e.listeners.get(t.target)),n&&n.forEach((function(e){return e(t)}))}))}))}return this.observerHolder}},{key:"observe",value:function(e,t){var n,r=this,i=this.listeners.get(e);return i?i.add(t):(this.listeners.set(e,new Set([t])),null===(n=this.observer)||void 0===n||n.observe(e)),function(){var n,i=r.listeners.get(e);i.delete(t),i.size||(r.listeners.delete(e),null===(n=r.observer)||void 0===n||n.unobserve(e))}}}])&&a(t.prototype,n),r&&a(t,r),e}();function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultSelector,n=arguments.length>2?arguments[2]:void 0,i=(0,r.useState)(null),a=i[0],s=i[1],l=(0,r.useState)(n),c=l[0],u=l[1],d=(0,r.useRef)(c),f=(0,r.useRef)(),p=(0,r.useCallback)((function(){a&&!f.current&&(f.current=e.observe(a,(function(e){var n=t(e);n===d.current||o()(n,d.current)||(d.current=n,u(n))})))}),[a,e,t]),h=(0,r.useCallback)((function(){var e;null===(e=f.current)||void 0===e||e.call(f),f.current=void 0}),[]);(0,r.useLayoutEffect)((function(){return p(),h}),[p,h]);var m=(0,r.useMemo)((function(){return{start:p,stop:h}}),[p,h]);return[s,c,m]}},17122:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ai}});var r=n(85893),i=n(14416),o=function(e){return e.crossSell},a=function(e){return o(e).items},s=n(90003),l=n(11032),c=n(7248),u=n(24721),d=function(e){return e.merchandise},f=n(36466),p=n(89854),h=n(56044),m=function(e){var t,n=null===(t=d(e))||void 0===t?void 0:t.details;if(null===n||void 0===n?void 0:n.id)return n;var r,i,o,s=(0,u.CC)(e),l=(0,u.XW)(e);if(s.menu&&(r=(0,p.vj)(s.menu,l,(0,u.Xj)(e))),!r&&s.reorderItems&&(r=s.reorderItems.find((function(e){var t=e.id,n=e.code;return l===t||l===n}))),!r){var f=(0,c.g)(e);f.items.length&&(r=f.items.find((function(e){return e.code===l||e.uuid===l||e.id===l})))}r||(r=null===(i=(0,h.sO)(e))||void 0===i?void 0:i.find((function(e){var t=e.id,n=e.code;return l===t||l===n})));r||(r=null===(o=a(e))||void 0===o?void 0:o.find((function(e){var t=e.id,n=e.code;return l===t||l===n})));return r},v=function(e){var t=(0,u.CC)(e);if(void 0!==(null===t||void 0===t?void 0:t.uuid))return(0,f.Qw)(t)&&(0,s.k)(m(e))},b=function(e){var t=(0,u.OU)(e),n=(0,l.y)(e);return t&&!n},g=function(e){var t=(0,u.CC)(e),n=d(e);return!t.isLoading||(t.isLoading.details||t.isLoading.menu)||n.isLoading},y=function(e){var t,n,r=m(e),i=(0,u.CC)(e),o=d(e);return!(null===r||void 0===r?void 0:r.id)||Boolean((null===(t=i.errorStatusCode)||void 0===t?void 0:t.details)||(null===(n=i.errorStatusCode)||void 0===n?void 0:n.menu)||o.error)},j=n(67294),x=n(34051),C=n.n(x),_=n(45697),O=n.n(_),k=n(91768),S=n(14890),P=n(94184),I=n.n(P),R=n(36750),w=n(50013),N=n(59387),T=n(27361),A=n.n(T),E=n(89734),q=n.n(E),M=n(85518),Z=n(75463),D=n(45881),L=n(46810),B=n(72683),F=n(76140),G=n(82462),U=n(67926),H=n(67525),z=n(66290);n(25656);function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function Q(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}var Y=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var i=W(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q(this,n)}}var X={content:O().string,children:O().node,isVisible:O().bool},ee=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,i,o=K(a);function a(){return $(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"renderContent",value:function(){var e=this.props.content;return(0,r.jsx)("div",{className:"dish-tooltip__container",children:(0,r.jsx)("span",{className:"dish-tooltip__content","aria-live":"polite",children:e})})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isVisible;return(0,r.jsxs)("div",{className:"dish-tooltip",children:[t,n&&this.renderContent()]})}}])&&V(t.prototype,n),i&&V(t,i),a}(j.Component);ee.propTypes=X,ee.defaultProps={content:"",children:null,isVisible:!1};var te=ee;n(71724);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ae(e,t){return!t||"object"!==le(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}var le=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var i=oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ae(this,n)}}var ue=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}({},H.Z,z.Z,{dishEdition:O().bool,isDisabled:O().bool,price:O().number,onSubmitItem:O().func,onRemoveItem:O().func,currentQty:O().number.isRequired,onChangeQty:O().func.isRequired,isLoop:O().bool,maxItemsPerOrder:O().number,maxItemsReached:O().bool,disableItemAddition:O().bool}),de={isDisabled:!0,dishEdition:!1,price:0,onSubmitItem:function(){},onRemoveItem:function(){},isLoop:!1,maxItemsPerOrder:void 0,maxItemsReached:!1,disableItemAddition:!1},fe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(a,e);var t,n,i,o=ce(a);function a(){return ne(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"renderEditionActions",value:function(){var e=this.props,t=e.t,n=e.price,i=e.currentQty,o=e.onChangeQty,a=e.onSubmitItem,s=e.onRemoveItem,l=e.isDisabled,c=e.setToastrMessage,u=e.isLoop,d=e.maxItemsReached;return(0,r.jsxs)("div",{className:"dish-action__update-wrapper",children:[l&&(0,r.jsx)("button",{type:"button",className:"dish-action__toastr-cta","aria-disabled":"true","aria-label":t("dish.required-garnish-missed"),onClick:function(){return c({message:t("dish.required-garnish-missed")})}}),(0,r.jsx)("div",{className:"dish-action__counter",children:(0,r.jsx)(N.AT,{max:u?1:void 0,startValue:i,min:0,onChange:o,disableIncrement:d},"dish-counter")}),(0,r.jsx)(F.Z,{ariaLabel:t(i>=1?"dish.update-item-aria":"dish.remove-item-button"),color:"primary",onClick:i>=1?a:s,disabled:l,children:(0,r.jsxs)("div",{className:"dish-action__add-button",children:[0===i&&(0,r.jsx)("span",{className:"dish-action__remove-text",children:t("dish.remove-item-button")}),i>=1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t("dish.update-item-button")}),(0,r.jsx)("span",{children:(0,G.xG)(n)})]})]})})]})}},{key:"renderAdditionActions",value:function(){var e=this.props,t=e.t,n=e.price,i=e.isDisabled,o=e.setToastrMessage,a=e.currentQty,s=e.onChangeQty,l=e.onSubmitItem,c=e.isLoop,u=e.maxItemsReached,d=e.disableItemAddition;return(0,r.jsxs)("div",{className:"dish-action__add-wrapper",children:[(0,r.jsx)("div",{className:"dish-action__counter",children:(0,r.jsx)(N.AT,{max:c?1:void 0,startValue:a,min:1,onChange:s,disableIncrement:u},"dish-counter")}),(0,r.jsx)(F.Z,{ariaLabel:t("dish.add-title-aria"),"data-test-id":"dish-action__add-button",onClick:l,fakeDisabled:i||d,onDisabledClick:function(){o({message:t("dish.required-garnish-missed")})},children:(0,r.jsxs)("div",{className:"dish-action__add-button",children:[(0,r.jsx)("span",{children:t("dish.add-title")}),(0,r.jsxs)("span",{children:["\xa0",(0,G.xG)(n)]})]})})]})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.dishEdition,i=e.maxItemsReached,o=e.maxItemsPerOrder;return(0,r.jsx)("div",{className:"dish-action",children:(0,r.jsx)(te,{content:t("dish.too-many-items",{maxItemsPerOrder:o}),direction:"top",isVisible:i,children:n?this.renderEditionActions():this.renderAdditionActions()})})}}])&&re(t.prototype,n),i&&re(t,i),a}(j.PureComponent);fe.propTypes=ue,fe.defaultProps=de;var pe=(0,U.Z)(fe,[(0,k.Z)("restaurant"),B.Z]),he=n(41799),me=n(38890);n(27540);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}var ge=be({},H.Z,{name:O().string.isRequired,deliveryTime:O().number.isRequired,superRestaurant:O().bool.isRequired,deliveryFee:O().object.isRequired,evaluationAverage:O().number.isRequired,tags:O().array.isRequired}),ye=function(e){var t=e.name,n=e.restaurantSlug,i=e.deliveryTime,o=e.t,a=e.superRestaurant,s=e.deliveryFee,l=e.evaluationAverage,c=e.tags,u=e.availableForScheduling,d=e.closed,f=null===l||void 0===l?void 0:l.toFixed(1),h=s.isFree,m=s.fee,v=(0,p.$V)(c,he.AE);return(0,r.jsx)(Z.Link,{route:me.ROUTE_RESTAURANT_HOME,params:n,children:(0,r.jsxs)("a",{className:"dish-restaurant",children:[(0,r.jsxs)("div",{className:"dish-restaurant__header",children:[(0,r.jsxs)("div",{className:"dish-restaurant__description",children:[(0,r.jsx)(N.JO,{name:"restaurant"}),(0,r.jsx)("span",{className:"dish-restaurant__title",children:t}),a&&(0,r.jsx)(N.Ct,{className:"restaurant-card__super",icon:"star-super",tooltip:o("tooltip-super")})]}),f&&!v&&(0,r.jsxs)("div",{className:"dish-restaurant__evaluation",children:[(0,r.jsx)(N.JO,{name:"star"}),(0,r.jsx)("span",{className:"dish-restaurant__evaluation-value",children:f})]}),v&&(0,r.jsx)("span",{className:"dish-restaurant__evaluation-value--new",children:o("restaurant:rating-new")})]}),(0,r.jsx)("div",{className:"dish-restaurant__divisor"}),(0,r.jsxs)("div",{className:"dish-restaurant__footer",children:[u&&d?(0,r.jsxs)("span",{className:"dish-restaurant__delivery-time",children:[(0,r.jsx)(N.JO,{name:"scheduling"}),(0,r.jsx)("span",{children:o("delivery-schedule")})]}):(0,r.jsx)("span",{className:"dish-restaurant__delivery-time",children:o("delivery-time",be({},(0,p.xU)(i)))}),(0,r.jsx)("span",{className:"dish-restaurant__dot-divisor",children:" \u2022 "}),(0,r.jsx)("span",{className:I()("dish-restaurant__delivery-price",{"dish-restaurant__delivery-price--free":h}),children:h?o("delivery-methods:free"):(0,G.xG)(m)})]})]})})};ye.propTypes=ge;var je=(0,k.Z)(["restaurants"])(ye),xe=n(26793),Ce=n(82580),_e=n(25091),Oe=n(18967),ke=n(52668),Se=n(7058);n(34898);function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ne(e,t){return!t||"object"!==Ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e,t){return Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Te(e,t)}var Ae=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ne(this,n)}}var qe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Re(e,t,n[t])}))}return e}({},H.Z,{garnishChoices:O().object.isRequired,formikProps:O().object.isRequired,isFulfilled:O().bool.isRequired,isMaximized:O().bool.isRequired,garnishOptionsCounter:O().number.isRequired}),Me=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,i,o=Ee(a);function a(){return Pe(this,a),o.apply(this,arguments)}return t=a,n=[{key:"isRadio",value:function(){var e=this.props.garnishChoices,t=e.min,n=e.max;return 0===t&&1===n?_e.VTW:1===t&&t===n&&_e.mkg}},{key:"isRequired",value:function(){return this.props.garnishChoices.min>0}},{key:"renderCounter",value:function(e){var t=e.garnishItem,n=e.isMaximized,i=this.props,o=i.garnishChoices,a=i.formikProps,s=a.setFieldValue,l=a.values,c=t.code,u=o.code,d="".concat(u,"-").concat(c),f=l[d];return(0,r.jsx)(N.AT,{name:d,id:d,onDecrement:function(){var e=f-1;s(d,e<=0?void 0:e)},onIncrement:function(){return s(d,f?f+1:1)},startValue:f,disableIncrement:n,min:0,minimal:!0,controlled:!0,"data-test-id":"counter"})}},{key:"renderGarnishItens",value:function(){var e=this,t=this.props,n=t.garnishChoices,i=t.isMaximized,o=n.code,a=this.isRadio();return n.garnishItens.map((function(t){var s=t.description,l=t.unitPrice,c=t.details,u=t.logoUrl,d="".concat(o,"-").concat(t.code),f=l>0,p=(0,Oe.QW)(ke.el.DISH,u,ke.zf.MEDIUM);return(0,r.jsx)("label",{tabIndex:"0",className:"garnish-choices__label",htmlFor:d,children:(0,r.jsxs)("span",{className:"garnish-choices__content",children:[(0,r.jsxs)("p",{className:"garnish-choices__option-desc",children:[s,c&&(0,r.jsx)("span",{className:"garnish-choices__option-details",children:c}),f&&(0,r.jsx)("span",{className:"garnish-choices__option-price",children:"+ ".concat((0,G.xG)(l))})]}),p&&(0,r.jsx)("figure",{className:"garnish-choices__content-img",children:(0,r.jsx)("img",{src:p,className:"garnish-choices__option-img",alt:n.details})}),a?e.renderRadio({garnishItem:t}):e.renderCounter({garnishItem:t,isMaximized:i})]})},d)}))}},{key:"renderRadio",value:function(e){var t=e.garnishItem,n=this.props,i=n.garnishChoices,o=n.formikProps,a=o.setFieldValue,s=o.setFieldTouched,l=o.values,c=i.code,u=this.isRadio(),d="".concat(u,"-").concat(c),f=t.code,p="".concat(c,"-").concat(f);return(0,r.jsx)(Se.Y8,{name:d,id:p,onChange:a,onBlur:s,toggleAvailable:!0,value:f,checked:l[d]===f.toString(),"data-test-id":"radio"})}},{key:"renderMiniTagLength",value:function(){var e=this.props,t=e.garnishChoices,n=t.max,i=t.min,o=e.garnishOptionsCounter,a=e.isFulfilled;return(0,r.jsx)(N.Ng,{"data-test-id":"MIN-".concat(i,"/MAX-").concat(n),size:"small",variant:a?"disabled":"black",children:"".concat(o,"/").concat(n)})}},{key:"renderRequiredMiniTag",value:function(){var e=this.props.t,t=this.isRadio()&&!this.props.isFulfilled||!this.props.isFulfilled;return(0,r.jsx)(N.Ng,{"data-test-id":"required",size:"small",variant:t?"black":"disabled",children:e("required")})}},{key:"renderTitleDescription",value:function(){var e=this.props,t=e.garnishChoices,n=t.min,i=t.max,o=t.name,a=e.t,s="";return s=0===n?i>1?a("max-options-no-required",{max:i}):a("max-one-option-no-required"):1===n&&n===i?a("one-option-required"):a(n===i?"options-required":"min-options-required",{min:n}),(0,r.jsxs)("p",{className:"garnish-choices__title","data-test-id":s,children:[o,(0,r.jsx)("span",{className:"garnish-choices__title-desc",children:s})]})}},{key:"renderTags",value:function(){return(0,r.jsxs)(r.Fragment,{children:[!this.isRadio()&&this.renderMiniTagLength(),this.isRequired()&&this.renderRequiredMiniTag()]})}},{key:"render",value:function(){var e=this.props.isFulfilled;return(0,r.jsxs)("section",{className:"garnish-choices__list",children:[(0,r.jsx)("div",{className:"garnish-choices__header",children:(0,r.jsxs)("span",{className:"garnish-choices__header-content",children:[this.renderTitleDescription(),(0,r.jsx)("span",{className:"garnish-choices__tags",children:e?(0,r.jsx)(N.JO,{className:"garnish-choices__choice--is-fulfilled",name:"check-mark"}):this.renderTags()})]})}),this.renderGarnishItens()]})}}],n&&Ie(t.prototype,n),i&&Ie(t,i),a}(j.Component);Me.propTypes=qe;var Ze=(0,k.Z)("garnishes")(Me),De=n(48271),Le=n(70245);n(9090);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ge(e,t,n[t])}))}return e}function ze(e,t){return!t||"object"!==Qe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qe=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Je(e,t){if(e){if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var i=Ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}var Ke={values:O().any.isRequired,onChangeGarnishes:O().func.isRequired,garnishesChoices:O().array,setFieldValue:O().func.isRequired,setFieldError:O().func.isRequired},Xe=function(e){return e.garnishOptionsCounter>=e.min},et=function(e){var t=e.values,n=e.code,r=Object.keys(t).filter((function(e){return-1!==e.search("".concat(n))})).reduce((function(e,n){return e+t[n]}),0);return"string"===typeof r?r.length&&1:r},tt=function(e){var t=e.garnishesChoices,n=e.parentCode;return t.find((function(e){return e.code===n}))},nt=function(e,t){return e.startsWith(t)},rt=function(e){var t,n,r=e.parent,i=void 0===r?[]:r,o=e.garnishItemCode,a=void 0===o?[]:o;return{garnishItem:null===(t=i.garnishItens)||void 0===t?void 0:t.find((function(e){return nt(e.code,a)})),itemOrder:null===(n=i.garnishItens)||void 0===n?void 0:n.findIndex((function(e){return nt(e.code,a)}))}},it=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(a,e);var t,n,i,o=Ye(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={values:{},dishChoices:[]},t}return t=a,i=[{key:"mapGarnishesToCheckout",value:function(e){var t=e.garnishesChoices,n=e.values,r=Object.keys(n),i=r.filter((function(e){return e.includes("GARNISH-RADIO")})),o=r.filter((function(e){return!e.includes("GARNISH-RADIO")})),a=i.map((function(e){var r=e.split("-").reverse()[0],i=n[e].toString(),o=tt({garnishesChoices:t,parentCode:r}),a=rt({parent:o,garnishItemCode:i}),s=a.garnishItem,l=a.itemOrder,c=s||[];return{amount:1,name:c.description,unitPrice:c.unitPrice,code:c.code,parentCode:r,parentOrder:o.order,itemOrder:l}})),s=0,l=[];return o.forEach((function(e){var r=e.split("-"),i=r[0],o=r[1],a=tt({garnishesChoices:t,parentCode:i}),c=rt({parent:a,garnishItemCode:o}),u=c.garnishItem,d=void 0===u?{}:u,f=c.itemOrder,p=d.description,h=d.unitPrice,m=d.code,v=null===a||void 0===a?void 0:a.order;if((0,Le.Z)({parentCode:i}))for(var b=0;b<n[e];b+=1)(s+=1)>1&&(i="".concat(r[0]).concat(s)),l.push({amount:1,name:p,unitPrice:h,code:m,parentCode:i,parentOrder:v,itemOrder:f});else l.push({amount:n[e],name:p,unitPrice:h,code:m,parentCode:i,parentOrder:v,itemOrder:f})})),We(a).concat(We(l))}},{key:"joinPizzaFlavorsChoices",value:function(e){var t=e.garnishesChoices,n=t.findIndex((function(e){return(0,Le.Z)({parentCode:e.code})})),r=t.reduce((function(e,t){return(0,Le.Z)({parentCode:t.code})&&(e.min+=1,e.max+=1),e}),He({},t[n],{min:0,max:0})),i=t.filter((function(e){return!1===(0,Le.Z)({parentCode:e.code})}));return i.splice(n,0,r),i}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.garnishesChoices,r=e.values,i={},o=[];if((0,De.Z)(n,t.garnishesChoices)||(o=function(e){var t=e.garnishesChoices;return t&&t.filter((function(e){return(0,Le.Z)({parentCode:e.code})})).length}({garnishesChoices:n})>1?a.joinPizzaFlavorsChoices({garnishesChoices:n}):n,i=He({},t,{garnishesChoices:n,dishChoices:o})),!(0,De.Z)(r,A()(t,"values",{}))){var s=a.mapGarnishesToCheckout({garnishesChoices:n,values:r}),l=function(e){var t=e.garnishesChoices,n=e.values;return t.every((function(e){var t=e.code,r=e.min,i=et({values:n,code:t});return Xe({garnishOptionsCounter:i,min:r})}))}({garnishesChoices:A()(t,"dishChoices",[]),values:r});e.onChangeGarnishes({garnish:s,garnishForm:r,garnishesFulfilled:l}),i=He({},t,i,{values:r,garnishesFulfilled:l})}return i}}],(n=[{key:"componentDidMount",value:function(){this.selectRequiredGarnishOption()}},{key:"selectRequiredGarnishOption",value:function(){var e=this.props.setFieldValue,t=this.state.dishChoices;(null===t||void 0===t?void 0:t.length)&&t.forEach((function(t){var n=t.min,r=t.max;if(1===t.garnishItens.length){var i=Ve(t.garnishItens,1)[0];1!==n||n!==r?0!==n&&1!==r&&e("".concat(t.code,"-").concat(i.code),n):e("".concat(_e.mkg,"-").concat(t.code),i.code)}}))}},{key:"renderGarnishesChoices",value:function(){var e=this.props,t=e.setFieldValue,n=e.setFieldError,i=this.state,o=i.values,a=i.dishChoices,s={setFieldValue:t,setFieldError:n,values:o};return(0,r.jsx)("section",{className:"dish-garnishes",children:(0,r.jsx)(Ce.l0,{tabIndex:"0","data-test-id":"form",children:a.map((function(e){var t,n=e.code,i=e.min,a=e.max,l=et({values:o,code:n}),c=Xe({garnishOptionsCounter:l,min:i});return(0,r.jsx)(Ze,{tabIndex:"0","data-test-id":"choice",formikProps:s,garnishOptionsCounter:l,isFulfilled:c,isMaximized:(t={garnishOptionsCounter:l,max:a},t.garnishOptionsCounter===t.max),garnishChoices:e},e.code)}))})})}},{key:"render",value:function(){return this.props.garnishesChoices&&this.renderGarnishesChoices()}}])&&Fe(t.prototype,n),i&&Fe(t,i),a}(j.PureComponent);it.propTypes=Ke,it.defaultProps={garnishesChoices:null};var ot=(0,Ce.j0)({mapPropsToValues:function(e){return e.garnishForm||{}}})(it);n(23521);function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function ut(e,t){return!t||"object"!==ft(t)&&"function"!==typeof t?at(e):t}function dt(e,t){return dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dt(e,t)}var ft=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ct(e);if(t){var i=ct(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}var ht=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lt(e,t,n[t])}))}return e}({},H.Z,{observation:O().string,onChange:O().func.isRequired}),mt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(a,e);var t,n,i,o=pt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={observation:e.observation||""},t.handleChange=t.handleChange.bind(at(t)),t}return t=a,(n=[{key:"handleChange",value:function(e){var t=e.target.value.slice(0,140);this.setState({observation:t}),this.props.onChange(t)}},{key:"render",value:function(){var e=this.state.observation,t=this.props.t;return(0,r.jsxs)("div",{className:"dish-observation-form",children:[(0,r.jsxs)("div",{className:"dish-observation-form__header",children:[(0,r.jsx)("label",{tabIndex:"0",className:"dish-observation-form__label",htmlFor:"observations-form",children:t("dish.observation-form-label")}),(0,r.jsx)("span",{className:"dish-observation-form__counter",children:"".concat(e.length," / 140")})]}),(0,r.jsx)("textarea",{maxLength:"140",tabIndex:"0",id:"observations-form",className:"dish-observation-form__textarea",value:e,onChange:this.handleChange,placeholder:t("dish.observation-placeholder")})]})}}])&&st(t.prototype,n),i&&st(t,i),a}(j.PureComponent);mt.propTypes=ht,mt.defaultProps={observation:""};var vt=(0,k.Z)("restaurant")(mt),bt=n(84264),gt=n(29411),yt=n(61463),jt=n(84340),xt=n(40137),Ct=n(38152),_t=n(37295),Ot=n(42793),kt=(n(21501),{dish:O().shape({unitPrice:O().number,unitMinPrice:O().number,unitOriginalPrice:O().number,promotionalPrice:O().number,minimumPromotionalPrice:O().number}).isRequired,isPromotion:O().bool});function St(e){var t=e.dish,n=e.isPromotion,i=(0,xe.$)("restaurant").t,o=t.unitPrice,a=t.unitMinPrice,s=t.unitOriginalPrice,l=t.promotionalPrice,c=t.minimumPromotionalPrice,u=(0,Ot.U)({unitPrice:o,unitMinPrice:a,unitOriginalPrice:s,promotionalPrice:l,minimumPromotionalPrice:c,isPromotion:n}),d=u.price,f=u.minPrice,p=u.originalPrice,h=p?f?f>p?(0,r.jsxs)("span",{className:"dish-price__min","data-test-id":"dish-content-price-min",children:[Pt(d,f)&&"".concat(i("dish.starting-at")),(0,G.xG)(f)]}):d>0&&Pt(d,f)&&f>p?(0,G.xG)(f):(0,r.jsxs)("span",{className:"dish-price__discount","data-test-id":"dish-content-discount-price",children:[Pt(d,f)?"".concat(i("dish.starting-at"),"  ").concat((0,G.xG)(f)):(0,G.xG)(d),(0,r.jsx)("span",{className:"dish-price__original",children:(0,G.xG)(p)})]}):(0,r.jsx)("span",{children:It(d,p)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"dish-price__discount",children:(0,G.xG)(d)}),(0,r.jsx)("span",{className:"dish-price__original","data-test-id":"dish-content-original-price-unit-price",children:(0,G.xG)(p)})]}):(0,G.xG)(d)}):f?d?(0,r.jsx)("span",{children:Pt(d,f)?i("dish.starting-at")+(0,G.xG)(f):(0,G.xG)(d)}):(0,G.xG)(f):(0,G.xG)(d);return(0,r.jsx)("div",{className:"dish-price",children:h})}function Pt(e,t){return t>e}function It(e,t){return e<t}St.propTypes=kt,St.defaultProps={isPromotion:!1};n(75565);function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Rt(e,t,n[t])}))}return e}var Nt=wt({},H.Z,{dish:O().shape({description:O().string,logoUrl:O().string,details:O().string,warns:(0,R.Z)(["greaterPrice"],O().bool.isRequired)}).isRequired,restaurant:O().shape({name:O().string.isRequired,charging:O().string}),garnishForm:O().object,onChangeGarnishes:O().func.isRequired,onChangeObservations:O().func.isRequired,observation:O().string,isEditing:O().bool,checkoutItem:O().object,cartItem:O().object,restaurantSlug:O().object.isRequired,isPromotion:O().bool.isRequired,isLoop:O().bool,dishDiscountTagData:O().object,closeComponent:O().node.isRequired,showButtonReport:O().bool.isRequired,openReportModal:O().func.isRequired}),Tt=function(e){var t,n=e.dish,i=e.restaurant,o=e.garnishForm,a=e.onChangeObservations,s=e.onChangeGarnishes,l=e.checkoutItem,c=e.observation,u=e.isEditing,d=e.restaurantSlug,f=e.isPromotion,p=e.isLoop,h=e.dishDiscountTagData,m=e.actionComponent,v=e.closeComponent,b=e.showButtonReport,g=e.openReportModal,y=(0,xe.$)(["restaurant","dishes","delivery-methods"]).t,j=i.charging,x=n.warns,C=n.choices,_=(Boolean(null===x||void 0===x?void 0:x.greaterPrice)||j===bt.PS)&&Boolean(null===C||void 0===C?void 0:C.find((function(e){return(0,Le.Z)({parentCode:e.code})}))),O=u?null===l||void 0===l?void 0:l.obs:c,k=f&&null!==n.promotionalPrice&&n.promotionalPrice>=0&&!p,S=Boolean(h);return(0,r.jsxs)("div",{className:I()("dish-content",{"dish-content--no-image":!n.logoUrl}),children:[n.logoUrl&&!M.tq&&(0,r.jsx)("div",{className:"dish-content__img-container","data-test-id":"dish-content__img-container",children:(0,r.jsx)("img",{src:(0,Oe.QW)(ke.el.DISH,n.logoUrl,ke.zf.MEDIUM),alt:n.description,className:"dish-content__img"})}),(0,r.jsx)("div",{className:"dish-content__header",children:v}),(0,r.jsxs)("div",{className:I()("dish-content__scrolling",{"dish-content__scrolling--loop-spacing":p}),children:[n.logoUrl&&M.tq&&(0,r.jsx)("div",{className:"dish-content__img-bg","data-test-id":"dish-content__img-container",style:{backgroundImage:"url(".concat((0,Oe.QW)(ke.el.DISH,n.logoUrl,ke.zf.MEDIUM))}}),(0,r.jsxs)("div",{className:I()("dish-content__container","dish-content__title"),children:[M.tq&&n.description,k&&!S&&(0,r.jsx)(gt.Z,{})]}),n.details&&(0,r.jsx)("p",{className:"dish-content__container dish-content__details","data-test-id":"dish-content__details",children:n.details}),(0,r.jsx)(_t.Z,{productTags:n.productTags,productInfo:n.productInfo,dishContent:!0}),!S&&(0,jt.eg)(n.tags)&&(0,r.jsx)("div",{className:"dish-content__container dish-content__details",children:(0,r.jsx)(xt.Z,{mini:!0})}),_&&(0,r.jsxs)("div",{className:"dish-content__container dish-warnings","data-test-id":"dish-warnings",children:[(0,r.jsx)("div",{className:"dish-warnings__title",children:y("dish.warn-title")}),(0,r.jsx)("span",{className:"dish-warnings__item",children:y("dish.warn-greater-price")})]}),S&&(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(yt.Z,wt({variant:"dish-content-tag-tooltip",showDescription:!0},h))}),(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(St,{dish:n,isPromotion:f})}),Boolean(null===n||void 0===n||null===(t=n.productTags)||void 0===t?void 0:t.length)&&(0,r.jsx)("div",{className:"dish-content__container dish-content__merchandise-tags",children:(0,r.jsx)(Ct.Z,{tags:null===n||void 0===n?void 0:n.productTags})}),!p&&(0,r.jsx)("div",{className:"dish-content__container dish-content__restaurant",children:(0,r.jsx)(je,wt({},i,{restaurantSlug:d}))}),C&&(0,r.jsx)(ot,{onChangeGarnishes:s,garnishForm:o,garnishesChoices:C}),function(){var e;return p?(0,r.jsx)("div",{className:"dish__loop-text","data-test-id":"dish-loop-limit",children:(0,r.jsx)("p",{children:y("loop:dish.limit-text")})}):!1===(null===i||void 0===i||null===(e=i.configs)||void 0===e?void 0:e.itemObservation)?null:(0,r.jsx)("div",{className:"dish-content__interactive-desktop",children:(0,r.jsx)(vt,{observation:O,onChange:a})})}(),b&&(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(N.zx,{theme:"tertiary",onClick:g,children:y("report")})})]}),(0,r.jsx)("div",{className:"dish-content__action",children:m})]})};Tt.propTypes=Nt,Tt.defaultProps={garnishForm:{},restaurant:{charging:"INDIVIDUAL"},checkoutItem:null,cartItem:null,isEditing:!1,observation:"",isLoop:!1,dishDiscountTagData:{}};var At=Tt,Et=n(85684),qt=n(32754),Mt=n(70274),Zt=n(10902),Dt=n(19198),Lt=n(96165),Bt=n(60996),Ft=n(72186),Gt=n(91800),Ut=n(7238),Ht=n(19286),zt=n(89814),$t=n(73057),Vt=n(35290),Wt=n(85433),Qt=n(8586),Jt=n(75474),Yt=n(96802);n(44355);function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){en(e,t,n[t])}))}return e}function rn(e,t){return!t||"object"!==an(t)&&"function"!==typeof t?Kt(e):t}function on(e,t){return on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},on(e,t)}var an=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tn(e);if(t){var i=tn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rn(this,n)}}var ln,cn={unsetCheckoutRestaurant:D.Bt,setCheckoutRestaurant:D.x0,addCheckoutItem:D.J6,editCheckoutItem:D.sG,removeCheckoutItem:D.aX,wipeCheckout:D.CP,setDishState:w.yC,setFloatingBox:L.N,openContextCard:Lt.p6,trackClickAddItem:Ft.C1,trackClickDish:Ft.dG,addCartItem:Gt._7,editCartItem:Gt.m8,removeCartItem:Gt.B8,unsetCart:Gt.ni,setCartDeliveryMethod:Gt.CW,setMerchantDeliveryMethod:Gt.wd},un=nn({},H.Z,{actions:(0,R.Z)(Object.keys(cn),O().func.isRequired).isRequired,checkout:O().object.isRequired,checkoutId:O().oneOfType([O().string,O().number]),restaurant:O().object.isRequired,dish:O().object,restaurantSlug:O().object.isRequired,isPromotion:O().bool.isRequired,isLoop:O().bool,dishDiscountTagData:O().object,closeComponent:O().node.isRequired,hasError:O().bool.isRequired,isCartInBackground:O().bool,showButtonReport:O().bool,openReportModal:O().func}),dn={checkoutId:"",dish:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]},isLoop:!1,dishDiscountTagData:{},isCartInBackground:!1,showButtonReport:!1,openReportModal:function(){}},fn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(a,e);var t,n,i,o=sn(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e);var n=e.checkoutId,r=e.checkout,i=e.dish,s=e.dishModal,l=e.cart,c=s.cartItemId,u=l.items,d=(0,zt.PF)({items:u,cartItemId:c}),f=r[r.currentRestaurant],p=f&&f.items[n]?f.items[n].qty:1,h=Boolean(i.choices)&&i.choices.some((function(e){return e.min>0})),m="";m=d?(null===d||void 0===d?void 0:d.observation)||"":f&&f.items[n]?f.items[n].obs:"";var v,b=a.hashGarnishForm({currentCheckout:f,checkoutId:n})?f.items[n].garnishForm:void 0,g=(null===d||void 0===d?void 0:d.garnishForm)||void 0,y=b||g||{},j=a.hashGarnish({currentCheckout:f,checkoutId:n})?f.items[n].garnish:[];return t.state={qty:null!==(v=null===d||void 0===d?void 0:d.quantity)&&void 0!==v?v:p,obs:m,garnish:j,garnishForm:y,garnishesFulfilled:!e.dish.choices||!h,closedRestaurantAlertIsOpen:!1,addressInvalidDialogIsOpen:!1,cartShuffleAlertIsOpen:!1},t.onChangeCounter=t.onChangeCounter.bind(Kt(t)),t.onChangeGarnishes=t.onChangeGarnishes.bind(Kt(t)),t.onChangeObservations=t.onChangeObservations.bind(Kt(t)),t.onSubmitItem=t.onSubmitItem.bind(Kt(t)),t.onRemoveItem=t.onRemoveItem.bind(Kt(t)),t.openClosedRestaurantAlert=t.openClosedRestaurantAlert.bind(Kt(t)),t.closeClosedRestaurantAlert=t.closeClosedRestaurantAlert.bind(Kt(t)),t.openAddressInvalidDialog=t.openAddressInvalidDialog.bind(Kt(t)),t.closeAddressInvalidDialog=t.closeAddressInvalidDialog.bind(Kt(t)),t.openCartShuffleAlert=t.openCartShuffleAlert.bind(Kt(t)),t.closeCartShuffleAlert=t.closeCartShuffleAlert.bind(Kt(t)),t.onAcceptShuffle=t.onAcceptShuffle.bind(Kt(t)),t}return t=a,n=[{key:"componentDidMount",value:function(){var e,t=this.props,n=t.actions,r=t.dish,i=t.restaurant,o=t.routerStates,a=t.dishDiscountTagData,s=t.hasError,l=Boolean(a);r.code?(n.trackClickDish({dish:r,routerStates:o,hasDishDiscountTag:l}),Bt.Z.viewDishPage(!0)):Bt.Z.viewDishPage(!1),s&&Vt.cM.info("Error on show dish modal",{restaurantId:null===i||void 0===i||null===(e=i.details)||void 0===e?void 0:e.id,errorStatusCode:null===i||void 0===i?void 0:i.errorStatusCode,dishUuid:null===r||void 0===r?void 0:r.id,dishCode:null===r||void 0===r?void 0:r.code})}},{key:"onCloseDish",value:function(e){this.props.actions.setDishState({isOpen:!1,changeRoute:e})}},{key:"onSubmitCartItem",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.allowShuffle,o=void 0!==i&&i,a=this.props,s=a.actions,l=a.restaurant,c=a.dish,u=a.cart,d=a.dishModal,p=a.isCartInBackground,h=a.checkoutId,m=a.address,v=a.cartDeliveryIsEmpty,b=this.state,g=b.qty,y=b.obs,j=b.garnish,x=b.garnishForm,C=d.cartItemId,_=u.items,O=(0,f.p2)(l),k=A()(l.deliveryInfo,"deliversAtLocation",!1),S=(0,Ut.YY)(m),P=p?(0,zt.fD)({items:_,checkoutItemIndex:h}):(0,zt.PF)({items:_,cartItemId:C});if(O&&!(null===l||void 0===l||null===(e=l.deliveryInfo)||void 0===e?void 0:e.availableForScheduling)&&S)this.openClosedRestaurantAlert();else if(!(null===u||void 0===u||null===(t=u.merchant)||void 0===t?void 0:t.id)||(null===u||void 0===u||null===(n=u.merchant)||void 0===n?void 0:n.id)===l.details.id||o)if(k){if(P){var I=(0,zt.kq)({garnish:j});s.editCartItem(nn({},P,{quantity:g,observation:y,subItems:null===I||void 0===I?void 0:I.subItems}),x)}else{var R=this.getSchedulingDetails();if(s.setMerchantDeliveryMethod(R.deliveryMethod,l.uuid),v||o){var w,N=null===(w=u.deliveryMethod)||void 0===w?void 0:w[l.uuid],T=(0,zt.D4)(l.deliveryMethods,N);s.setCartDeliveryMethod(T)}var E=c,q=(0,zt.kq)(nn({},c,{qty:g,obs:y,garnish:j}),{code:null===E||void 0===E?void 0:E.code});s.addCartItem(q,l.uuid,l.details.name,x)}this.onCloseDish(!0)}else this.openAddressInvalidDialog();else this.openCartShuffleAlert()}},{key:"onSubmitItem",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.allowShuffle,i=void 0!==r&&r,o=this.props,a=o.actions,s=o.checkout,l=o.restaurant,c=o.dish,u=o.checkoutId,d=o.restaurantSlug,p=o.isLoop,h=o.isPromotion,m=o.routerStates,v=o.isCartInBackground,b=o.address,g=o.catalogCategoryName,y=l.menu,j=this.state,x=j.qty,C=j.obs,_=j.garnish,O=j.garnishForm,k=q()(_,["parentOrder","itemOrder"]),S=s[l.details.id],P=A()(l.deliveryInfo,"deliversAtLocation",!1),I=!p,R=this.getSchedulingDetails(),w=(0,f.p2)(l),N=(0,Ut.YY)(b);if(w&&!(null===l||void 0===l||null===(e=l.deliveryInfo)||void 0===e?void 0:e.availableForScheduling)&&N)this.openClosedRestaurantAlert();else if(!s.currentRestaurant||s.currentRestaurant===l.details.id||i)if(P){if((null===S||void 0===S||null===(t=S.restaurant)||void 0===t?void 0:t.restaurantId)&&!p||(a.wipeCheckout(),a.setCheckoutRestaurant({restaurantId:l.uuid,name:l.details.name,restaurantSlug:d,details:nn({},l.details,{menu:y}),isDocumentRequired:l.details.isDocumentRequired,charging:l.details.charging,deliveryMethods:l.deliveryMethods,scheduling:R}),a.setMerchantDeliveryMethod(R.deliveryMethod,l.uuid)),S&&S.items[u])a.editCheckoutItem({qty:x,obs:C,garnish:k,garnishForm:O,checkoutId:u,restaurantId:l.uuid,id:null===c||void 0===c?void 0:c.id});else{var T,E,M,Z,D=nn({},c,{menuCode:null===(T=(0,jt.H5)(y,null===c||void 0===c?void 0:c.code))||void 0===T?void 0:T.code,qty:x,obs:C,garnish:k,garnishForm:O,restaurantId:l.uuid,category:(0,Ht.n)(null===l||void 0===l||null===(E=l.details)||void 0===E?void 0:E.type,null===l||void 0===l||null===(M=l.details)||void 0===M||null===(Z=M.mainCategory)||void 0===Z?void 0:Z.code),scalePrices:(0,Wt.Ru)({unitPrice:c.unitPrice,promotionalPrice:c.promotionalPrice,scalePrices:c.scalePrices}),totalValue:this.dishTotalPrice()});a.addCheckoutItem(D),this.manageRedirect()}v&&this.onSubmitCartItem({allowShuffle:i});var L=(0,Oe.Qw)(window);a.trackClickAddItem({dish:c,restaurant:l,checkout:this.state,isPromotion:h,routerStates:m,originArea:L.get("originArea"),aisleName:g,taxonomy:L.get(Yt._H)}),this.onCloseDish(I)}else this.openAddressInvalidDialog();else this.openCartShuffleAlert()}},{key:"onAcceptShuffle",value:function(){var e=this.props,t=e.actions,n=e.checkout,r=e.isCartInBackground;this.closeCartShuffleAlert(),r&&(t.unsetCart(),this.onSubmitCartItem({allowShuffle:!0})),t.unsetCheckoutRestaurant({restaurantId:n.currentRestaurant}),this.onSubmitItem({allowShuffle:!0})}},{key:"onRemoveItem",value:function(){var e=this.props,t=e.actions,n=e.restaurant,r=e.checkoutId,i=e.isCartInBackground;t.removeCheckoutItem({checkoutId:r,restaurantId:n.details.id}),i&&this.onRemoveCartItem(),this.onCloseDish()}},{key:"onRemoveCartItem",value:function(){var e=this.props,t=e.actions,n=e.cart,r=e.dishModal,i=e.checkoutId,o=e.isCartInBackground,a=n.items,s=r.cartItemId,l=o?(0,zt.fD)({items:a,checkoutItemIndex:i}):(0,zt.PF)({items:a,cartItemId:s});l&&t.removeCartItem(l),this.onCloseDish()}},{key:"onChangeCounter",value:function(e){this.setState({qty:e})}},{key:"onChangeObservations",value:function(e){this.setState({obs:e})}},{key:"onChangeGarnishes",value:function(e){var t=e.garnish,n=e.garnishForm,r=e.garnishesFulfilled;this.setState({garnish:t,garnishForm:n,garnishesFulfilled:r})}},{key:"getSchedulingDetails",value:function(){var e,t,n,r,i,o,a,s,l=this.props,c=l.checkout,u=l.restaurant,d=c[u.details.id];return{deliveryDate:null!==(i=null===d||void 0===d?void 0:d.deliveryDate)&&void 0!==i?i:null===(e=u.scheduling)||void 0===e?void 0:e.deliveryDate,scheduled:null!==(o=null===d||void 0===d?void 0:d.scheduled)&&void 0!==o?o:null===(t=u.scheduling)||void 0===t?void 0:t.scheduled,isTakeOut:null!==(a=null===d||void 0===d?void 0:d.isTakeOut)&&void 0!==a?a:null===(n=u.scheduling)||void 0===n?void 0:n.isTakeOut,deliveryMethod:null!==(s=null===d||void 0===d?void 0:d.deliveryMethod)&&void 0!==s?s:null===(r=u.scheduling)||void 0===r?void 0:r.deliveryMethod}}},{key:"dishTotalPrice",value:function(){var e=this.state,t=e.qty,n=e.garnish,r=this.props,i=r.dish,o=i.unitPrice,a=i.promotionalPrice,s=r.restaurant.details.charging,l=r.isPromotion,c=r.dishDiscountTag,u=Boolean(c);return(0,Et.Jw)({qty:t,unitPrice:o,promotionalPrice:a,isPromotion:l,garnish:n,charging:s,hasDishDiscountTag:u})}},{key:"deliveryAddress",value:function(){var e=this.props,t=e.address.location,n=t.district,r=t.address,i=t.geoLocated,o=t.streetNumber,a=e.t;return i?a("address:geo.next-to",{district:n||r}):(0,qt.Z)([r,o])}},{key:"manageRedirect",value:function(){var e=this.props,t=e.actions,n=e.restaurantSlug,r=e.isLoop,i=Z.Router.router.pathname,o=r&&!M.tq;["/SubHomeCardstack/SubHomeCardstack","/Search/Search"].indexOf(i)>-1&&!M.tq?t.setFloatingBox({name:"restaurantCart",isVisible:!0}):o?Z.Router.pushRoute(me.ROUTE_CHECKOUT):"/Restaurant/Restaurant"!==i&&Z.Router.pushRoute(me.ROUTE_RESTAURANT_HOME,n)}},{key:"openClosedRestaurantAlert",value:function(){this.setState({closedRestaurantAlertIsOpen:!0})}},{key:"closeClosedRestaurantAlert",value:function(){this.setState({closedRestaurantAlertIsOpen:!1})}},{key:"openAddressInvalidDialog",value:function(){this.setState({addressInvalidDialogIsOpen:!0})}},{key:"closeAddressInvalidDialog",value:function(){this.setState({addressInvalidDialogIsOpen:!1})}},{key:"openCartShuffleAlert",value:function(){this.setState({cartShuffleAlertIsOpen:!0})}},{key:"closeCartShuffleAlert",value:function(){this.setState({cartShuffleAlertIsOpen:!1})}},{key:"renderAddressInvalidDialog",value:function(){var e=this.state.addressInvalidDialogIsOpen,t=this.props.restaurant.details.address,n=[A()(t,"district"),A()(t,"city"),A()(t,"state")].filter(Boolean).join(" - ");return(0,r.jsx)(Zt.Z,{isOpen:e,deliveryAddress:this.deliveryAddress(),onRequestClose:this.closeAddressInvalidDialog,restaurantAddress:n})}},{key:"renderClosedRestaurantAlert",value:function(){var e=this.state.closedRestaurantAlertIsOpen,t=this.props,n=t.t,i=t.restaurant.details.nextOpeningHour,o=void 0===i?{}:i,a=(0,Mt.ex)(o.openingTime),s=(0,Mt.iL)(o.openingTime)?n("restaurant:dish.closed-restaurant-title-opening",{openingHour:a}):n("restaurant:dish.closed-restaurant-title-not-opening");return(0,r.jsx)(N.bZ,{onRequestClose:this.closeClosedRestaurantAlert,isOpen:e,title:s,message:n("restaurant:dish.closed-restaurant-message")})}},{key:"renderCartShuffleAlert",value:function(){var e=this.state.cartShuffleAlertIsOpen;return(0,r.jsx)(N.u_,{type:"dialog",animation:"bottom",onRequestClose:this.closeCartShuffleAlert,isOpen:e,displayActions:!0,closeIcon:"close",children:(0,r.jsx)(Dt.Z,{onRequestClose:this.closeCartShuffleAlert,onAccept:this.onAcceptShuffle})})}},{key:"render",value:function(){var e,t,n,i,o=this.state,a=o.qty,s=o.garnishesFulfilled,l=o.garnishForm,c=o.obs,u=this.props,d=u.restaurant,f=u.dish,p=u.checkout,h=u.checkoutId,m=u.isPromotion,v=u.restaurantSlug,b=u.isLoop,g=u.dishDiscountTagData,y=u.closeComponent,j=u.hasError,x=u.dishModal,C=u.cart,_=u.showButtonReport,O=u.openReportModal,k=(null!==(n=null===d||void 0===d||null===(e=d.details)||void 0===e?void 0:e.configs)&&void 0!==n?n:{}).maxItemsPerOrder,S=x.cartItemId,P=C.items,I=nn({},(0,zt.PF)({items:P,cartItemId:S}),c?{observation:c}:{}),R=nn({},A()(p[d.details.id],"items[".concat(h,"]")),c?{obs:c}:{}),w=!!p[d.details.id]&&Boolean(p[d.details.id].items[h]),T=p[p.currentRestaurant]||{},E=A()(T,"items[".concat(h,"].qty"),0),q=(0,jt.GT)(T.items)-E+a,M=k&&q>=k,Z=k&&q>k;return j?(0,r.jsxs)(r.Fragment,{children:[y,(0,r.jsx)("div",{className:"dish__error-message",children:(0,r.jsx)(N.Bc,{})})]}):(0,r.jsxs)("div",{className:"dish__container","data-test-id":"dish-container",children:[(0,r.jsx)(At,{dish:f,garnishForm:l,restaurant:nn({},d.details,{deliveryFee:d.deliveryFee,availableForScheduling:d.deliveryInfo.availableForScheduling}),onChangeObservations:this.onChangeObservations,onChangeGarnishes:this.onChangeGarnishes,checkoutItem:R,cartItem:I,observation:c,isEditing:w,restaurantSlug:v,isPromotion:m,isLoop:b,dishDiscountTagData:g,closeComponent:y,showButtonReport:_,openReportModal:O,actionComponent:(0,r.jsx)(pe,{onChangeQty:this.onChangeCounter,currentQty:a,price:this.dishTotalPrice(),onSubmitItem:this.onSubmitItem,dishEdition:w,onRemoveItem:this.onRemoveItem,isDisabled:!s,deliversAtLocation:null!==(i=null===d||void 0===d||null===(t=d.deliveryInfo)||void 0===t?void 0:t.deliversAtLocation)&&void 0!==i&&i,isLoop:b,maxItemsReached:M,maxItemsPerOrder:k&&Number(k),disableItemAddition:Z})}),this.renderAddressInvalidDialog(),this.renderClosedRestaurantAlert(),this.renderCartShuffleAlert()]})}}],i=[{key:"hashGarnish",value:function(e){var t=e.currentCheckout,n=e.checkoutId;return t&&t.items[n]&&t.items[n].garnish}},{key:"hashGarnishForm",value:function(e){var t=e.currentCheckout,n=e.checkoutId;return t&&t.items[n]&&t.items[n].garnishForm}}],n&&Xt(t.prototype,n),i&&Xt(t,i),a}(j.Component);fn.propTypes=un,fn.defaultProps=dn;var pn=(0,U.Z)(fn,[Qt.s,(0,i.$j)((function(e,t){var n=e.checkout,r=e.address,i=e.promotion,o=e.promotions,a=e.router,s=e.dish,l=e.cart,c=e.dishModal,u=e.catalogCategory;return{checkout:n,address:r,isPromotion:(0,Et.XJ)({promotion:i,checkout:n},t.restaurant.uuid),routerStates:a,dishDiscountTagData:(0,jt.Yk)(null!==(ln=null===s||void 0===s?void 0:s.tags)&&void 0!==ln?ln:[],(0,$t.Gp)({promotions:o})),cart:l,dishModal:c,cartDeliveryIsEmpty:(0,Jt.nU)({cart:l}),catalogCategoryName:null===u||void 0===u?void 0:u.name}}),(function(e){return{actions:(0,S.DE)(cn,e)}})),(0,k.Z)(["restaurant","address","loop"])]),hn=function(e){var t=e.companyCode;return"ILP"===(void 0===t?"":t)},mn=n(48141),vn=n(78645),bn=n(94432);n(95002);function gn(e){var t=e.isOpen,n=e.details,i=e.onRequestClose,o=(0,xe.$)("merchant").t,a=(0,j.useState)(),s=a[0],l=a[1];return(0,r.jsx)(N.u_,{type:"dialog",animation:"bottom",onRequestClose:function(){return i(!1)},isOpen:t,displayActions:!0,closeIcon:"close",overlayClassName:"cart-shuffle-modal__overlay",children:(0,r.jsxs)("div",{className:"report-modal",children:[!M.tq&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.zx,{theme:"link",variant:"report-modal__back",width:"fit-content",onClick:function(){return i(!1)},children:o("report.back")}),(0,r.jsx)(vn.Heading1,{variant:"medium",children:null===n||void 0===n?void 0:n.initialModalTitle}),(0,r.jsx)("div",{className:"report-modal__content",children:(0,r.jsxs)(vn.CardSelect.Group,{onChange:function(e){return l(e.target.value)},children:[(0,r.jsx)(vn.CardSelect.Option,{id:"option1",name:"dish",title:null===n||void 0===n?void 0:n.inappropriateContentMainTitle,description:null===n||void 0===n?void 0:n.inappropriateContentModalSubtitle,value:"INAPPROPRIATE_CONTENT",mb:32}),(0,r.jsx)(vn.CardSelect.Option,{id:"option2",name:"dish",title:null===n||void 0===n?void 0:n.forbiddenItemsTitle,description:null===n||void 0===n?void 0:n.forbiddenItemsModalSubtitle,value:"FORBIDDEN_ITEMS"})]})}),(0,r.jsx)("div",{className:"report-modal__confirm",children:(0,r.jsx)(N.zx,{onClick:function(){return i(s)},children:o("report.confirm")})})]}),M.tq&&(0,r.jsxs)(r.Fragment,{children:[!s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(vn.Heading3,{variant:"small",children:null===n||void 0===n?void 0:n.initialModalTitle}),(0,r.jsx)("div",{className:"report-modal__content",children:(0,r.jsxs)(vn.List,{children:[(0,r.jsx)(vn.List.Item,{onClick:function(){return l("INAPPROPRIATE_CONTENT")},children:(0,r.jsxs)(vn.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsxs)(vn.Flex,{flexDirection:"column",children:[(0,r.jsxs)(vn.Text,{variant:"medium",children:[" ",null===n||void 0===n?void 0:n.inappropriateContentMainTitle]}),(0,r.jsxs)(vn.Text,{variant:"small",children:[" ",null===n||void 0===n?void 0:n.inappropriateContentSubtitle]})]}),(0,r.jsx)(bn.ChevronRight,{})]})}),(0,r.jsx)(vn.List.Item,{onClick:function(){return l("FORBIDDEN_ITEMS")},children:(0,r.jsxs)(vn.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsxs)(vn.Flex,{flexDirection:"column",children:[(0,r.jsxs)(vn.Text,{variant:"medium",children:[" ",null===n||void 0===n?void 0:n.forbiddenItemsTitle]}),(0,r.jsxs)(vn.Text,{variant:"small",children:[" ",null===n||void 0===n?void 0:n.forbiddenItemsSubtitle]})]}),(0,r.jsx)(bn.ChevronRight,{})]})})]})}),(0,r.jsx)(N.zx,{theme:"tertiary",mt:32,mb:8,fullWidth:!0,onClick:function(){return i(!1)},children:o("report.cancel")})]}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(vn.Heading3,{variant:"small",children:"INAPPROPRIATE_CONTENT"===s?null===n||void 0===n?void 0:n.inappropriateContentModalTitle:null===n||void 0===n?void 0:n.forbiddenItemsModalTitle}),(0,r.jsx)(vn.Text,{variant:"regular",children:"INAPPROPRIATE_CONTENT"===s?null===n||void 0===n?void 0:n.inappropriateContentModalSubtitle:null===n||void 0===n?void 0:n.forbiddenItemsModalSubtitle}),(0,r.jsxs)("div",{className:"report-modal__confirm",children:[(0,r.jsx)(N.zx,{fullWidth:!0,onClick:function(){return i(s)},children:o("report.confirm")}),(0,r.jsx)(N.zx,{theme:"tertiary",fullWidth:!0,onClick:function(){return l(void 0)},children:o("report.back")})]})]})]})]})})}gn.propTypes={isOpen:O().bool.isRequired,details:O().object.isRequired,onRequestClose:O().func.isRequired};var yn=n(45717);function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"reportItem",value:function(e,t,n){return yn.Z.post("v1/merchant-info/".concat(e,"/item/").concat(t,"/report"),{report_reason:n})}}],(n=null)&&jn(t.prototype,n),r&&jn(t,r),e}(),Cn=n(28511);function _n(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function On(){var e=(0,i.I0)(),t=(0,j.useState)(!1),n=t[0],r=t[1],o=(0,xe.$)("merchant").t,a=(0,j.useCallback)(function(){var t,i=(t=C().mark((function t(i,a,s){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return r(!0),t.prev=3,t.next=6,xn.reportItem(i,a,s);case 6:e((0,Cn.PJ)({message:o("report.success"),toastType:"success"})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),e((0,Cn.PJ)({message:o("report.error")}));case 12:return t.prev=12,r(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,9,12,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){_n(o,r,i,a,s,"next",e)}function s(e){_n(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,t,n){return i.apply(this,arguments)}}(),[e,n,o]);return{handleReportItem:a,isLoading:n}}var kn=n(68877),Sn=n(5152),Pn=n(39368),In=(n(19339),(0,Sn.default)((function(){return n.e(1083).then(n.bind(n,21083))}),{loadableGenerated:{webpack:function(){return[21083]}},ssr:!1})),Rn=(0,Sn.default)((function(){return n.e(5711).then(n.bind(n,25711))}),{loadableGenerated:{webpack:function(){return[25711]}},ssr:!1}),wn={handleClose:O().func.isRequired,dishTitle:O().string};function Nn(e){var t=e.handleClose,n=e.dishTitle,i=(0,xe.$)().t;return(0,r.jsx)("div",{className:"dish-modal__header",children:(0,r.jsx)(Pn.$T,{title:n,theme:"primary",rightIcon:(0,r.jsx)(Rn,{}),rightAriaLabel:i("common:close"),onClickRightButton:t,leftSlot:(0,r.jsx)(N.Ei,{onClick:t,ariaLabel:i("common:close"),icon:(0,r.jsx)(In,{}),transparent:!0,variant:I()("dish-modal__header-back-button")})})})}Nn.propTypes=wn,Nn.defaultProps={dishTitle:""};n(85410);function Tn(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var En={setDishState:w.yC,unsetMerchandiseDetails:mn.M3},qn=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){An(e,t,n[t])}))}return e}({},H.Z,{actions:(0,R.Z)(Object.keys(En),O().func.isRequired).isRequired,restaurant:O().object,restaurantSlug:O().object,checkoutId:O().string,isOpen:O().bool,dish:O().object,isLoading:O().bool.isRequired,hasError:O().bool.isRequired}),Mn=function(e){var t=e.restaurant,n=e.checkoutId,i=e.restaurantSlug,o=e.isOpen,a=e.actions,s=e.dish,l=e.isLoading,c=e.hasError,u=function(){a.setDishState({isOpen:!1,pushBack:!0})},d=t.details,f=!l&&hn(t.details),p=(0,j.useState)(),h=p[0],m=p[1],v=(0,j.useState)(!1),b=v[0],g=v[1],y=On().handleReportItem;(0,j.useEffect)((function(){var e;(e=C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn.ZP.itemReportReasonsDetails();case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Tn(o,r,i,a,s,"next",e)}function s(e){Tn(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]),(0,j.useEffect)((function(){!l&&!c&&o&&(null===s||void 0===s?void 0:s.description)&&d&&Bt.Z.viewItem(s,d)}),[l,c,o,s,d]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(gn,{isOpen:b,details:h,onRequestClose:function(e){g(!1),e&&y(t.uuid,s.id,e)}}),(0,r.jsx)(N.u_,{overlayClassName:"dish-modal__overlay",variant:I()("dish-modal",{"dish-modal--loading":l}),closeTimeoutMS:0,isOpen:o,onRequestClose:u,type:"fullpage",animation:"bottom",theme:"white",scrollLock:!1,children:l?(0,r.jsx)(N.$j,{className:"dish-modal__spinner",center:!0}):(0,r.jsx)(pn,{restaurantSlug:i,restaurant:t,dish:s,checkoutId:n,isLoop:f,closeComponent:(0,r.jsx)(Nn,{handleClose:u,dishTitle:null===s||void 0===s?void 0:s.description}),hasError:c,showButtonReport:null===h||void 0===h?void 0:h.enabled,openReportModal:function(){g(!0)}})})]})};Mn.propTypes=qn,Mn.defaultProps={restaurant:{isLoading:null,menu:[]},restaurantSlug:{},checkoutId:null,isOpen:!1,dish:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]}};var Zn=(0,U.Z)(Mn,[(0,k.Z)("restaurant"),(0,i.$j)(null,(function(e){return{actions:(0,S.DE)(En,e)}})),j.memo]),Dn=n(9008),Ln=n(45291),Bn=n(35432),Fn=n.n(Bn),Gn=n(88460),Un=n(94774);n(84099);function Hn(e){var t=e.product,n=e.isPromotion,o=(0,j.useMemo)((function(){return(0,Un.VA)(t.code)}),[t.code]),a=(0,i.v9)(o),s=(0,Wt.H0)(t)?t.scalePrices[0]:null;return s&&s.minQuantity<=a?(0,r.jsxs)("div",{className:"product-detail-header-price__scale",children:[(0,G.xG)(s.promotionalPrice||s.price),(0,r.jsx)("span",{className:"product-detail-header-price__scale--original",children:(0,G.xG)(t.unitPrice)})]}):(0,r.jsx)(St,{isPromotion:n,dish:t})}n(65770);function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zn(e,t,n[t])}))}return e}function Vn(e){var t,n=e.product,o=e.merchantSlug,a=e.catalogName,s=e.aisleCode,l=e.handleClose,c=e.isSticky,u=e.isPromotion,d=e.actionComponent,f=e.isPage,p=e.showButtonReport,h=e.openReportModal,m=(0,xe.$)("merchant").t,v=(0,i.I0)(),b=Boolean(n.code);return(0,r.jsxs)(r.Fragment,{children:[!f&&(0,r.jsx)("div",{className:"product-detail-header--cover"}),(0,r.jsxs)("div",{className:I()("product-detail-header",{"product-detail-header--empty":!b,"product-detail-header--sticky":c}),"data-test-id":"product-detail-header",children:[(0,r.jsxs)(N.zP,{max:"desktop-s",children:[(0,r.jsx)(Pn.$T,{title:"",theme:"transparent",leftIcon:"arrow-down-thin",leftAriaLabel:m("modal-info.nav-header-aria-left-label"),onClickLeftButton:l,fixed:!0}),c&&(0,r.jsx)(Pn.$T,{title:n.description,subtitle:b&&(0,r.jsx)(St,{dish:n,isPromotion:u}),theme:"primary",leftIcon:"arrow-down-thin",leftAriaLabel:m("modal-info.nav-header-aria-left-label"),onClickLeftButton:l,fixed:!0})]}),(0,r.jsxs)(N.zP,{min:"desktop-s",children:[b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(vn.Flex,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,r.jsxs)(N.Oo,{separator:(0,r.jsx)("span",{className:"breadcrumbs-container__separator",children:"/"}),children:[(0,r.jsx)(Z.Link,{route:me.ROUTE_RESTAURANT_HOME,params:o,children:(0,r.jsx)("a",{children:m("breadcrumbs.merchant")})}),Boolean(a)&&(0,r.jsx)("a",{onClick:function(){l(),v((0,Gn.s5)({code:s}))},className:"breadcrumbs__label--link",children:a}),Boolean(n.parentTaxonomyName)&&(0,r.jsx)(Z.Link,{route:me.ROUTE_RESTAURANT_HOME,params:$n({},o,(t={},zn(t,Yt.xG,s),zn(t,Yt._H,n.parentTaxonomyName),t)),children:(0,r.jsx)("a",{children:n.parentTaxonomyName})})]}),p&&(0,r.jsx)(N.zx,{theme:"link",variant:"report-button",onClick:h,children:m("report.button")})]}),c&&(0,r.jsxs)("div",{className:I()("product-detail-header__grid",{"product-detail-header__grid--visible":c}),children:[(0,r.jsx)("div",{className:"product-detail-header__image-container",children:(0,r.jsx)("img",{src:(0,Oe.QW)(ke.el.DISH,n.logoUrl,ke.zf.LOW),alt:n.description,className:"marmita-image--responsive product-detail-header__image"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(Fn(),{tagName:"p",className:"product-detail-header__description",clamp:1,useNativeClamp:!0,children:n.description}),(0,r.jsxs)("div",{className:"product-detail-header__details-grid",children:[(0,r.jsx)(Hn,{product:n,isPromotion:u}),(0,r.jsx)("div",{className:"product-detail-header__details",children:n.details})]})]}),j.cloneElement(d,{hideOnClosed:!0})]})]}),!f&&(0,r.jsx)("div",{className:"product-detail-header__close-button",children:(0,r.jsx)(N.Ei,{ariaLabel:m("modal-info.nav-header-aria-left-label"),icon:"close",onClick:l,size:"l",transparent:!0})})]})]})]})}Vn.propTypes={product:O().object.isRequired,merchantSlug:O().object.isRequired,catalogName:O().string,aisleCode:O().string,handleClose:O().func.isRequired,isSticky:O().bool.isRequired,isPromotion:O().bool.isRequired,actionComponent:O().element,isPage:O().bool,showButtonReport:O().bool.isRequired,openReportModal:O().func.isRequired},Vn.defaultProps={catalogName:"",aisleCode:"",actionComponent:null,isPage:!1};var Wn=n(98547),Qn=n(20640),Jn=n.n(Qn),Yn=n(28823),Kn=n(40915),Xn=n(41266),er=n(52989),tr=n(78370),nr=(n(84549),(0,Sn.default)((function(){return n.e(6658).then(n.bind(n,26658))}),{loadableGenerated:{webpack:function(){return[26658]}},ssr:!1}));function rr(){var e=(0,tr.Z)(),t=(0,xe.$)(["groceries"]).t;return e?(0,r.jsxs)("div",{className:"product-detail-low-stock-alert",role:"alert",children:[(0,r.jsx)(nr,{className:"product-detail-low-stock-alert__warning-icon"}),(0,r.jsx)("p",{className:"product-detail-low-stock-alert__text",children:t("groceries:low-stock-item.warning")})]}):null}var ir=n(63390);n(70560);function or(e){return(0,j.useMemo)((function(){return e.needChoices?function(e){var t,n;return null!==(n=null===(t=e.choices)||void 0===t?void 0:t.map((function(e){return 1===e.garnishItens.length?{id:e.garnishItens[0].id,quantity:e.max,name:e.garnishItens[0].description}:null})).filter((function(e){return Boolean(e)})))&&void 0!==n?n:[]}(e):[]}),[e])}n(61875);function ar(e){return(0,r.jsxs)("div",{className:"product-detail-info-product-item",children:[(0,r.jsx)("span",{className:"product-detail-info-product-item__quantity",children:e.quantity}),(0,r.jsx)("span",{className:"product-detail-info-product-item__name",children:e.name})]})}n(20323);function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e){var t=(0,xe.$)("groceries").t;return(0,r.jsxs)("div",{className:"product-detail-product-list-content",children:[(0,r.jsx)("h3",{className:"product-detail-product-list-content__title",children:t("items")}),e.products.map((function(e){return(0,r.jsx)(ar,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sr(e,t,n[t])}))}return e}({},e),e.id)}))]})}function cr(e){var t=or(e.catalogItem);return t.length?(0,r.jsx)(lr,{products:t}):null}var ur=n(2631),dr=n(12615);function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hr=function(e){return function(t){return function(e){return e.intersectionRatio}(t)>=e}};n(70637);function mr(e){var t=e.text,n=e.itemName,i=e.itemCode,o=e.itemId,a=e.merchantId,s=(0,xe.$)("product-detail").t,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=pr((0,dr.Z)((0,j.useMemo)((function(){return hr(t)}),[t]),!1),3),i=r[0],o=r[1],a=r[2];return(0,j.useEffect)((function(){o&&(e(),n&&a.stop())}),[e,a,n,t,o]),(0,j.useEffect)((function(){n||a.start()}),[a,n]),i}((0,j.useCallback)((function(){kn.ZP.clickViewMoreItemDetail({itemName:n,itemCode:i,itemId:o,merchantId:a})}),[i,o,n,a]),.5,!0);return(0,r.jsxs)("section",{ref:l,className:"product-detail-long-description",children:[(0,r.jsx)("h3",{className:"product-detail-long-description__title",children:s("long-description.title")}),(0,r.jsx)("p",{className:"product-detail-long-description__text",children:t})]})}var vr=n(86213),br=n(53773);function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jr=function(e){return yr((0,br.N)(e),2)[1]>40};function xr(e){var t=e.text,n=e.itemName,i=e.itemCode,o=e.itemId,a=e.merchantId,s=(0,xe.$)(["product-detail","see-more"]).t,l=yr((0,vr.Z)(jr),3),c=l[0],u=l[1],d=l[2],f=(0,j.useState)(!1),p=f[0],h=f[1];(0,j.useEffect)((function(){void 0!==u&&(d.stop(),h((function(e){return!(e||!u)||e})))}),[d,u]);var m=(0,j.useCallback)((function(){return h((function(e){return!(e||!u)&&(kn.ZP.clickViewMoreItemDetail({itemName:n,itemCode:i,itemId:o,merchantId:a}),!0)}))}),[u,i,o,n,a]);return(0,r.jsxs)("section",{className:"product-detail-long-description",onClick:m,title:s(p?"see-more:message.see-more":"see-more:message.see-less"),style:{"--see-more":"' ".concat(s("see-more:message.see-more"),"'")},children:[(0,r.jsx)("h3",{className:"product-detail-long-description__title",children:s("long-description.title")}),(0,r.jsxs)("p",{ref:c,className:I()("product-detail-long-description__text",{"product-detail-long-description__text--collapsed":p}),children:[t,(0,r.jsx)("span",{})]})]})}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Cr(e,t,n[t])}))}return e}function Or(e){return(0,ur.Z)()?(0,r.jsx)(mr,_r({},e)):(0,r.jsx)(xr,_r({},e))}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pr(e){var t=e.text,n=Sr(e,["text"]);return t?(0,r.jsx)(Or,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kr(e,t,n[t])}))}return e}({text:t},n)):null}var Ir=n(91064);n(99749);function Rr(e){var t=e.scalePrice,n=e.promotionalScalePrice,i=e.unitPrice,o=e.promotionalPrice,a=e.minQuantity,s=e.isScalePriceActive,l=(0,xe.$)("merchandise").t,c=o&&o<i,u=Math.round(100*(o/i-1));return(0,r.jsx)("div",{className:"product-detail-scale-price",children:(0,r.jsxs)("div",{className:"product-detail-scale-price__content",children:[(0,r.jsxs)("div",{className:"product-detail-scale-price__scale",children:[(0,r.jsx)("p",{className:"product-detail-scale-price__price product-detail-scale-price__price--scale",children:(0,G.xG)(n||t)}),(0,r.jsx)(Ir.Z,{children:l("scale-price.tag",{minQuantity:a})})]}),(0,r.jsxs)("div",{className:"product-detail-scale-price__original",children:[(0,r.jsxs)("div",{className:I()({"product-detail-scale-price__original-wrapper--inline":c}),children:[(0,r.jsx)("p",{className:I()("product-detail-scale-price__price product-detail-scale-price__price--original",{"product-detail-scale-price__price--disabled":s}),children:(0,G.xG)(c?o:i)}),(0,r.jsx)("small",{className:I()("product-detail-scale-price__original-info",{"product-detail-scale-price__original-info--disabled":s}),children:l(c?"scale-price.unit":"scale-price.unit-price")})]}),c&&(0,r.jsxs)("div",{className:"product-detail-scale-price__discount",children:[(0,r.jsx)("p",{className:I()("product-detail-scale-price__discount-tag",{"product-detail-scale-price__discount-tag--disabled":s}),children:"".concat(u,"%")}),(0,r.jsx)("p",{className:I()("product-detail-scale-price__discount-price",{"product-detail-scale-price__discount-price--disabled":s}),children:(0,G.xG)(i)})]})]})]})})}n(54322);var wr=(0,Sn.default)((function(){return n.e(9233).then(n.bind(n,99233))}),{loadableGenerated:{webpack:function(){return[99233]}},ssr:!1});function Nr(){var e=(0,xe.$)("merchandise").t;return(0,r.jsxs)("div",{className:"product-detail-scale-price-info",children:[(0,r.jsx)(wr,{}),(0,r.jsx)("p",{className:"product-detail-scale-price-info__text",children:e("scale-price.info")})]})}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Tr(e,t,n[t])}))}return e}function Er(e){var t,n=e.merchant,o=e.product,a=e.isPromotion,s=e.setDetailContentElement,l=e.actionComponent,c=e.isWeighableItem,u=e.hasProductDiscountTag,d=e.productDiscountTagData,f=e.isClosed,p=e.isPage,h=(0,xe.$)(["groceries","common"]).t,m=(0,j.useState)(),v=m[0],b=m[1],g=(0,ir.Z)(o),y=!f&&g,x=(0,Ot.U)(Ar({},o,{isPromotion:a})).price,C=(0,Xn.Nm)(o,x),_=(0,Wt.H0)(o)?o.scalePrices[0]:null,O=o.unitPrice,k=o.unitMinPrice,S=o.unitOriginalPrice,P=o.scalePrices,R=o.promotionalPrice,w=o.minimumPromotionalPrice,T=(0,j.useCallback)((function(){var e=(0,Oe.iO)(window,Yt.xG),t=window.location.host,n="".concat(t).concat(e);Jn()(n),b(!0)}),[]),A=(0,j.useMemo)((function(){return(0,Un.VA)(o.code)}),[o.code]),E=(0,i.v9)(A);return(0,r.jsxs)("section",{className:I()("product-detail",{"product-detail--page":p}),"data-test-id":"product-detail",children:[(0,r.jsxs)("div",{className:"product-detail__image-container",children:[Boolean(o.logoUrl)&&(0,r.jsx)("img",{src:(0,Oe.QW)(ke.el.DISH,o.logoUrl,ke.zf.HIGHT),alt:o.description,className:"product-detail__image"}),(0,r.jsx)("div",{className:"product-detail__image--overlay"})]}),(0,r.jsxs)("div",{className:"product-detail__info",children:[(0,r.jsx)("div",{className:"product-detail__description",children:o.description}),(0,r.jsx)("div",{children:u&&(0,r.jsx)(er.Z,Ar({},d))}),(0,r.jsx)(Yn.Z,{min:"desktop-s",children:(0,r.jsx)(Pr,{text:(null===o||void 0===o?void 0:o.additionalInfo)||(null===o||void 0===o?void 0:o.details),itemName:o.description,itemCode:o.code,itemId:o.id,merchantId:null===n||void 0===n?void 0:n.uuid})}),(0,r.jsx)("div",{className:"product-detail__price",children:_?(0,r.jsx)(Rr,{unitPrice:o.unitPrice,promotionalPrice:o.promotionalPrice,scalePrice:_.price,promotionalScalePrice:_.promotionalPrice,minQuantity:_.minQuantity,isScalePriceActive:E>=_.minQuantity}):(0,r.jsx)(Kn.Z,{unitPrice:O,unitMinPrice:k,unitOriginalPrice:S,scalePrices:P,promotionalPrice:R,minimumPromotionalPrice:w,isPromotion:a})}),Boolean(null===(t=o.productTags)||void 0===t?void 0:t.length)&&(0,r.jsx)(Ct.Z,{tags:o.productTags}),c&&(0,r.jsxs)("div",{className:"product-detail__weighable",children:[(0,r.jsx)("span",{children:h("groceries:weighable-item.kilo-price")}),(0,r.jsx)("span",{className:"product-detail__weighable--value",children:(0,G.xG)(C)}),(0,r.jsx)("span",{children:h("groceries:weighable-item.estimated-weight")}),(0,r.jsx)("span",{className:"product-detail__weighable--value",children:"".concat(o.sellingOption.incremental,"g")})]}),(0,r.jsx)(cr,{catalogItem:o}),_&&(0,r.jsx)(Nr,{}),(0,r.jsx)("div",{className:"product-detail__divider"}),c&&(0,r.jsxs)("div",{className:"product-detail__warning",children:[(0,r.jsx)(Wn.Q,{src:"/static/images/icons/weighable-item-warning.svg"}),h("weighable-item.warning")]}),y&&(0,r.jsx)(rr,{}),(0,r.jsx)("div",{ref:s,children:l})]}),(0,r.jsx)("div",{className:"product-detail__floating-actions",children:(0,r.jsx)(N.u,{variant:I()({"product-detail__tooltip--success":v},"product-detail__tooltip"),content:h(v?"common:copied-link":"common:share"),direction:"bottom",onMouseLeave:function(){return b(!1)},children:(0,r.jsx)(N.Ei,{icon:"share",color:"white",variant:"product-detail__button-share",ariaLabel:h("common:share"),onClick:T})})})]})}Er.propTypes={merchant:O().object.isRequired,product:O().object.isRequired,isPromotion:O().bool.isRequired,setDetailContentElement:O().func.isRequired,actionComponent:O().element.isRequired,isWeighableItem:O().bool.isRequired,hasProductDiscountTag:O().bool.isRequired,productDiscountTagData:O().object,isClosed:O().bool.isRequired,isPage:O().bool},Er.defaultProps={productDiscountTagData:null,isPage:!1};var qr=n(69729),Mr=n(80668),Zr=n(41609),Dr=n.n(Zr),Lr=n(63249),Br=n(86843),Fr=n(93244),Gr=n(94639),Ur=n(9818);function Hr(e){var t;if(!(null===(t=e.choices)||void 0===t?void 0:t.length))return[];var n=e.choices.map(zr);return q()(n,["parentOrder","itemOrder"])}function zr(e){return{amount:e.max,name:e.garnishItens[0].description,unitPrice:e.garnishItens[0].unitPrice,code:e.garnishItens[0].code,parentCode:e.code,parentOrder:e.order,itemOrder:0}}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e){var t,n;return(null===(t=e.choices)||void 0===t?void 0:t.length)?null===(n=e.choices)||void 0===n?void 0:n.reduce(Wr,{}):{}}function Wr(e,t){var n;return(null===(n=t.garnishItens)||void 0===n?void 0:n.length)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$r(e,t,n[t])}))}return e}({},e,$r({},"".concat(t.code,"-").concat(t.garnishItens[0].id),t.max)):e}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qr(e,t,n[t])}))}return e}n(73468);function Yr(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function Kr(e){var t,n,o,a,s,l,u,d,f,p,h=e.merchant,m=e.product,v=e.merchantSlug,b=e.isPromotion,g=e.isWeighableItem,y=e.hideOnClosed,x=e.merchantIsClosed,_=e.aisleCode,O=(0,xe.$)(["address","merchant"]).t,k=(0,i.I0)(),S=(0,i.v9)((function(e){return e.checkout})),P=(0,i.v9)((function(e){return e.address})),I=(0,i.v9)((function(e){var t=e.promotion;return null===t||void 0===t?void 0:t.violation})),R=(0,j.useState)(!1),w=R[0],T=R[1],E=(0,j.useState)(!1),q=E[0],M=E[1],Z=(0,j.useState)(0),L=Z[0],B=Z[1],F=(0,j.useState)(!1),G=F[0],U=F[1],H=(0,j.useState)(void 0),z=H[0],$=H[1],V=S[S.currentRestaurant],W=null!==(l=null===V||void 0===V?void 0:V.items)&&void 0!==l?l:{},Q=Object.keys(W).reduce((function(e,t){var n,r;return e+(null!==(r=null===(n=W[t])||void 0===n?void 0:n.qty)&&void 0!==r?r:0)}),0),J=Q,Y=(null!==(u=null===V||void 0===V||null===(t=V.restaurant)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.configs)&&void 0!==u?u:{}).maxItemsPerOrder,K=J>=parseInt(Y,10),X=Object.keys(W).filter((function(e){return m.code===W[e].code}))||[0],ee=null!==(f=X.reduce((function(e,t){var n;return e+(null!==(d=null===(n=W[t])||void 0===n?void 0:n.qty)&&void 0!==d?d:0)}),0))&&void 0!==f?f:1,te=ee,ne=X[X.length-1],re=null!==(p=null===(o=W[ne])||void 0===o?void 0:o.qty)&&void 0!==p?p:1,ie=S.currentRestaurant&&S.currentRestaurant===h.uuid,oe=(0,qt.Z)([A()(h,"details.address.district"),A()(h,"details.address.city"),A()(h,"details.address.state")].filter(Boolean)," - "),ae=function(e){var t=e.checkoutId,n=e.merchant,r=e.merchantSlug,o=e.product,a=e.isPromotion,s=e.aisleCode,l=e.sendLowStockInfo,u=e.drugstorePrescriptionConfig,d=(0,ir.Z)(o),f=(0,i.I0)(),p=(0,i.oR)(),h=(0,j.useMemo)((function(){return[Hr(o),Vr(o)]}),[o]),m=h[0],v=h[1],b=(0,j.useCallback)((function(){var e=(0,Ur.Tu)(n.deliveryMethods,!0);f((0,D.fn)({isTakeOut:!0,restaurantId:n.uuid})),f((0,D.us)({deliveryMethod:e,restaurantId:n.uuid})),f((0,Gt.wd)(e,n.uuid))}),[f,n.deliveryMethods,n.uuid]),g=(0,j.useCallback)((function(e){var i,h=p.getState(),g=(0,Un.op)(h),y=null!==(i=null===g||void 0===g?void 0:g.items)&&void 0!==i?i:{},j=(0,c.X)(h);if(Dr()(g)){var x,C,_,O,k,S,P,I=(0,Br.Je)(h),R=Jr({},I,{scheduled:null===(x=n.scheduling)||void 0===x?void 0:x.scheduled});f((0,Gt.wd)(R,n.uuid)),f((0,D.x0)({restaurantId:n.uuid,name:n.details.name,restaurantSlug:r,details:n.details,isDocumentRequired:n.details.isDocumentRequired,charging:n.details.charging,deliveryMethods:n.deliveryMethods,scheduling:{deliveryDate:null!==(k=null===g||void 0===g?void 0:g.deliveryDate)&&void 0!==k?k:null===(C=n.scheduling)||void 0===C?void 0:C.deliveryDate,scheduled:null!==(S=null===g||void 0===g?void 0:g.scheduled)&&void 0!==S?S:null===(_=n.scheduling)||void 0===_?void 0:_.scheduled,isTakeOut:null!==(P=null===g||void 0===g?void 0:g.isTakeOut)&&void 0!==P?P:null===(O=n.scheduling)||void 0===O?void 0:O.isTakeOut,deliveryMethod:I}}))}if(g&&y[t]){if(!(e>=1))return void f((0,D.aX)({checkoutId:t,restaurantId:g.restaurant.restaurantId}));var w=y[t].obs,N=o.productTags;(0,Wt.g4)({tags:N,group:Gr.UI.SALES_REQUIREMENTS,tag:Gr.ab.MEDICAL_PRESCRIPTION})&&u&&b(),f((0,D.sG)({qty:e,obs:w||"",garnish:m,garnishForm:v,checkoutId:t,restaurantId:g.restaurant.restaurantId,id:o.id,choices:o.choices}))}else{var T,A,E,q=Jr({},o,{menuCode:s,qty:e,obs:"",restaurantId:n.uuid,garnish:m,garnishForm:v,category:(0,Ht.n)(null===n||void 0===n||null===(T=n.details)||void 0===T?void 0:T.type,null===n||void 0===n||null===(A=n.details)||void 0===A||null===(E=A.mainCategory)||void 0===E?void 0:E.code),scalePrices:(0,Wt.Ru)({unitPrice:o.unitPrice,promotionalPrice:o.promotionalPrice,scalePrices:o.scalePrices}),isLowStock:d}),M=o.productTags;(0,Wt.g4)({tags:M,group:Gr.UI.SALES_REQUIREMENTS,tag:Gr.ab.MEDICAL_PRESCRIPTION})&&u&&b(),f((0,D.J6)(q))}var Z=(0,Oe.Qw)(window);kn.ZP.trackClickAddItem(Fr.ZP.clickAddItemFormatter({dish:o,restaurant:n,checkout:{qty:e},isPromotion:a,routerStates:(0,Lr.I_)(h),sendLowStockInfo:Boolean(l),isLowStock:d,originArea:Z.get("originArea"),aisleName:j,taxonomy:Z.get(Yt._H)}))}),[p,t,o,n,a,l,d,f,r,m,v,u,b,s]);return(0,j.useMemo)((function(){return{onChangeItemQuantity:g}}),[g])}({checkoutId:ne,merchant:h,merchantSlug:v,product:m,isPromotion:b,aisleCode:_,sendLowStockInfo:!0,drugstorePrescriptionConfig:z}).onChangeItemQuantity;(0,j.useEffect)((function(){var e;(e=C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn.ZP.drugstorePrescriptionCheckoutTest();case 2:t=e.sent,$(null===t||void 0===t?void 0:t.enabled);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Yr(o,r,i,a,s,"next",e)}function s(e){Yr(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]),(0,j.useEffect)((function(){T(Boolean(ne))}),[ne]),(0,j.useEffect)((function(){var e,t=null===(e=h.deliveryInfo)||void 0===e?void 0:e.deliversAtLocation;null!==t&&M(!t)}),[null===(a=h.deliveryInfo)||void 0===a?void 0:a.deliversAtLocation]),(0,j.useEffect)((function(){var e;(null===I||void 0===I||null===(e=I.violationCodes)||void 0===e?void 0:e.includes(null===Mr.md||void 0===Mr.md?void 0:Mr.md.TagItemStockViolation))&&(null===I||void 0===I||I.restaurantOrder.flatMap((function(e){return null===e||void 0===e?void 0:e.itens})).forEach((function(e){var t,n;(null===e||void 0===e?void 0:e.code)===(null===m||void 0===m?void 0:m.code)&&(null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.isStockDivergent)&&(B(null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.qty),U(!0),kn.ZP.groceriesStockCheckoutError({stockListDiff:JSON.stringify(e),frnUuid:ne}))})))}),[I,m,ne]),(0,j.useEffect)((function(){G&&ae(L)}),[L,ae,G]);var se=(0,j.useMemo)((function(){var e=P.location,t=e.district,n=e.address,r=e.geoLocated,i=e.streetNumber;return r?O("address:geo.next-to",{district:t||n}):(0,qt.Z)([n,i])}),[P.location,O]),le=(0,j.useMemo)((function(){var e=h.details.nextOpeningHour,t=void 0===e?{}:e,n=(0,Mt.ex)(t.openingTime);return(0,Mt.iL)(t.openingTime)?O("merchant:closed.opening",{openingHour:n}):O("merchant:closed.title")}),[h,O]),ce=(0,j.useCallback)((function(){A()(h,"deliveryInfo.deliversAtLocation",!1)?!ie&&J>0?k((0,qr.n)({isOpen:!0,newCart:{restaurant:h,restaurantSlug:v,dish:m}})):(T(!0),ae(1)):M(!0)}),[k,ie,J,h,v,ae,m]),ue=(0,j.useMemo)((function(){var e;if(!g)return String(te);var t=te*(null===m||void 0===m||null===(e=m.sellingOption)||void 0===e?void 0:e.minimum);if(t<1e3)return"".concat(t,"g");var n=(t/1e3).toFixed(2).replace(".",",");return"".concat(n,"kg")}),[g,null===m||void 0===m||null===(s=m.sellingOption)||void 0===s?void 0:s.minimum,te]);return x&&y?null:x&&!q?(0,r.jsxs)("div",{className:"product-detail-action",children:[(0,r.jsx)("h3",{className:"product-detail-action__merchant-closed-title",children:le}),(0,r.jsx)("p",{className:"product-detail-action__merchant-closed-message",children:O("merchant:closed.message")})]}):(0,r.jsxs)("div",{className:"product-detail-action",children:[!w&&(0,r.jsx)(N.zx,{fullWidth:!0,onClick:ce,disabled:K&&ie,variant:"product-detail-action__add-button",children:O("merchant:item.add")}),w&&(0,r.jsx)(N.AT,{min:0,onDecrement:function(){return ae(re-1)},onIncrement:function(){return ae(re+1)},disableIncrement:K,startValue:te,controlled:!0,customDescrementIcon:1===te?"remove":void 0,customValue:ue}),(0,r.jsx)(Zt.Z,{isOpen:q,onRequestClose:function(){return M(!1)},deliveryAddress:se,restaurantAddress:oe})]})}Kr.propTypes={merchant:O().object.isRequired,product:O().object.isRequired,merchantSlug:O().object.isRequired,isPromotion:O().bool.isRequired,merchantIsClosed:O().bool.isRequired,isWeighableItem:O().bool.isRequired,hideOnClosed:O().bool,aisleCode:O().string.isRequired},Kr.defaultProps={hideOnClosed:!1};var Xr=n(72612),ei=n(42383),ti=n(25794);function ni(){var e,t=(0,i.v9)(d),n=(0,i.v9)(ei.Qs),r=(0,i.v9)(u.o8,i.wU),o=r.dishId,a=r.menuCode,s=(0,j.useMemo)((function(){return t.details.id?t.details:{id:o}}),[t.details,o]),l=a||(null===s||void 0===s||null===(e=s.category)||void 0===e?void 0:e.code),c=(0,j.useMemo)((function(){return(0,ti.ay)(null===n||void 0===n?void 0:n.menu,l)}),[n.menu,l]);return{product:s,merchant:n,catalogItem:c}}function ri(e){var t,n=e.merchant,o=e.catalogCode,a=e.product,s=e.merchantSlug,l=e.isStickyHeader,c=e.setDetailContentElement,u=e.handleClose,d=e.isPage,p=e.showButtonReport,h=e.openReportModal,m=(0,i.I0)(),v=(0,i.v9)($t.Gp),b=(0,i.v9)((0,$t.PN)(n.uuid)),g=(0,f.p2)(n)&&!(null===n||void 0===n?void 0:n.hasAvailableTimeslots),y=(0,Xn.RP)(a),x=ni().catalogItem,C=(0,j.useMemo)((function(){return(0,jt.Yk)(null!==(t=null===a||void 0===a?void 0:a.tags)&&void 0!==t?t:[],v)}),[null===a||void 0===a?void 0:a.tags,v]),_=Boolean(C);(0,j.useEffect)((function(){(null===v||void 0===v?void 0:v.requestStatus)===Xr._X&&m((0,Ln.aR)())}),[m,null===v||void 0===v?void 0:v.requestStatus]);var O=(0,j.useMemo)((function(){return(0,r.jsx)(Kr,{merchant:n,product:a,merchantSlug:s,isPromotion:b,merchantIsClosed:g,isWeighableItem:y,aisleCode:o})}),[n,a,s,b,g,y,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Vn,{product:a,catalogName:null===x||void 0===x?void 0:x.name,aisleCode:null===x||void 0===x?void 0:x.code,merchantSlug:s,isSticky:l,isPromotion:b,handleClose:u,actionComponent:O,isPage:d,showButtonReport:p,openReportModal:h}),(0,r.jsx)(Er,{product:a,isPromotion:b,setDetailContentElement:c,merchant:n,actionComponent:O,isWeighableItem:y,hasProductDiscountTag:_,productDiscountTagData:C,isClosed:g,isPage:d})]})}ri.propTypes={merchant:O().object.isRequired,catalogCode:O().string.isRequired,product:O().object.isRequired,merchantSlug:O().object.isRequired,isStickyHeader:O().bool.isRequired,setDetailContentElement:O().func.isRequired,handleClose:O().func.isRequired,isPage:O().bool,showButtonReport:O().bool.isRequired,openReportModal:O().func.isRequired},ri.defaultProps={isPage:!1};var ii=n(60106),oi=n(64696),ai=n(11163),si=n(38848),li=n(81530),ci=n(49003);n(33971);function ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function di(e){var t=e.title,n=e.items,i=e.merchant,o=e.isPromotion,a=e.catalogCode,s=e.canSeeAllItems,l=e.handleClickSeeAllItems,c=e.crossellingType,u=e.description,d=e.fullPage,f=(0,xe.$)("restaurant").t,p=(0,ai.useRouter)(),h=p.asPath,m=p.query,v=ni(),b=v.product,g=v.catalogItem,y=(0,j.useMemo)((function(){return(0,jt.IZ)(i.details)}),[i.details]),x=(0,j.useCallback)((function(e){var t=m[si.zZ]||m[si.e_],n=h.replace(t,e);Z.Router.pushRoute(n)}),[h,m]),C=(0,j.useCallback)((function(e){return(0,r.jsx)(ci.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ui(e,t,n[t])}))}return e}({},e,{restaurant:i}))}),[i]);return(0,j.useEffect)((function(){(null===b||void 0===b?void 0:b.description)&&(null===b||void 0===b?void 0:b.id)&&(null===i||void 0===i?void 0:i.uuid)&&(null===g||void 0===g?void 0:g.name)&&kn.ZP.printCrossSelling({accessPoint:"groceriesDetails",aisleType:c,didSucceed:"success",frnUuid:i.uuid,dishId:b.id,isPromotion:o,itemName:b.description,itemSectionName:g.name})}),[c,i,o,null===b||void 0===b?void 0:b.description,null===b||void 0===b?void 0:b.id,null===g||void 0===g?void 0:g.name]),(0,r.jsxs)("section",{className:I()("product-detail-carousel",{"product-detail-carousel--full-page":d}),children:[(0,r.jsxs)("header",{className:"product-detail-carousel__header",children:[(0,r.jsxs)("div",{className:"product-detail-carousel__header-texts",children:[(0,r.jsx)("h2",{className:"product-detail-carousel__title",children:t}),u&&(0,r.jsx)("p",{className:"product-detail-carousel__description",children:u})]}),s&&n.length>6?(0,r.jsx)(N.zx,{theme:"link",label:f("see-all"),onClick:l}):null]}),(0,r.jsx)(li.Z,{variant:"product-detail-carousel__wrapper",items:n,grocery:y,isPromotion:o,catalogCode:a,handleProductClick:x,crossellingType:c,actionComponent:C})]})}function fi(e){var t=e.merchant,n=e.isPromotion,o=e.catalogCode,s=e.isPage,l=(0,xe.$)("groceries").t,c=(0,i.v9)(a);return(0,r.jsx)(di,{title:l("cross-sell-item.title"),items:c,merchant:t,isPromotion:n,catalogCode:o,crossellingType:"sameAisle",fullPage:s})}di.propTypes={title:O().string.isRequired,items:O().array.isRequired,merchant:O().object.isRequired,isPromotion:O().bool.isRequired,catalogCode:O().string.isRequired,canSeeAllItems:O().bool,handleClickSeeAllItems:O().func,crossellingType:O().string.isRequired,description:O().string,fullPage:O().bool},di.defaultProps={canSeeAllItems:!1,handleClickSeeAllItems:function(){},description:"",fullPage:!1},fi.propTypes={merchant:O().object.isRequired,isPromotion:O().bool.isRequired,catalogCode:O().string.isRequired,isPage:O().bool.isRequired};var pi=n(74653),hi=n(50846),mi=function(e){var t;return null===e||void 0===e||null===(t=e.similarItems)||void 0===t?void 0:t.items},vi=function(e){var t;return null===e||void 0===e||null===(t=e.similarItems)||void 0===t?void 0:t.isLoading},bi=function(e){var t=a(e),n=function(e){return o(e).isLoading}(e),r=Boolean(null===t||void 0===t?void 0:t.length);return!n&&r},gi=function(e,t){return function(n){var r=(0,ei.c7)(n),i=(0,ti.ay)(r,t);return(0,Wt.$K)(i,e.id)}},yi=function(e){var t=(0,ei.c7)(e);return(0,ti.Lo)(t)},ji=function(e){var t=yi(e);return Boolean(null===t||void 0===t?void 0:t.length)};n(64901);function xi(e){var t=e.merchant,n=e.closeModal,o=(0,i.v9)(yi),a=(0,i.I0)(),s=(0,j.useCallback)((function(e){n(),Z.Router.events.on("routeChangeComplete",(function t(){a((0,Gn.s5)({code:e})),Z.Router.events.off("routeChangeComplete",t)}))}),[a,n]);return(0,r.jsx)("div",{className:"product-detail-catalog-aisles","data-test-id":"product-detail-catalog-aisles",children:(0,r.jsx)(hi.Z,{merchant:t,groups:o,onOpenGroup:s,groupsPerSlideBreakpoints:{1034:8,1148:9,desktop:10}})})}xi.propTypes={merchant:pi.wC.isRequired,closeModal:O().func.isRequired};n(68783);function Ci(e){var t=e.merchant,n=e.product,o=e.isPromotion,a=e.catalogCode,s=e.closeModal,l=e.isPage,c=(0,i.I0)(),u=(0,xe.$)("groceries").t,d=(0,i.v9)(gi(n,a)),f=(0,j.useCallback)((function(e){s(),Z.Router.events.on("routeChangeComplete",(function t(){c((0,Gn.s5)({code:e})),Z.Router.events.off("routeChangeComplete",t)}))}),[c,s]),p=(0,j.useCallback)((function(){f(a)}),[f,a]);return(0,r.jsx)("div",{className:"product-detail-aisle",children:(0,r.jsx)(di,{title:u("aisle-item.title"),items:d,merchant:t,isPromotion:o,catalogCode:a,canSeeAllItems:!0,handleClickSeeAllItems:p,crossellingType:"recommendation",fullPage:l})})}function _i(e){var t=e.merchant,n=e.isPromotion,o=e.catalogCode,a=e.isPage,s=(0,i.v9)(mi),l=(0,xe.$)("groceries").t;return(0,r.jsx)(di,{title:l("similar-items.title"),description:l("similar-items.description"),items:s,merchant:t,isPromotion:n,catalogCode:o,fullPage:a,crossellingType:"relatedItems"})}Ci.propTypes={merchant:O().object.isRequired,product:O().object.isRequired,isPromotion:O().bool.isRequired,catalogCode:O().string.isRequired,closeModal:O().func,isPage:O().bool.isRequired},Ci.defaultProps={closeModal:function(){}},_i.propTypes={merchant:O().object.isRequired,isPromotion:O().bool.isRequired,catalogCode:O().string.isRequired,isPage:O().bool.isRequired};var Oi=n(68697);function ki(e){var t,n,o,a,s,l=e.merchant,c=e.product,u=e.catalogCode,f=e.merchantSlug,p=e.checkoutId,h=e.isLoading,m=e.hasError,v=e.onClose,b=e.setDetailContentElement,g=e.isStickyHeader,y=e.isPage,x=e.showButtonReport,C=e.openReportModal,_=(0,ir.Z)(c),O=(0,tr.Z)(),k=(0,i.v9)(d),S=(0,i.v9)((0,$t.PN)(l.uuid)),P=(0,i.v9)(function(e,t){return function(n){var r=(0,ei.c7)(n),i=(0,ei.sZ)(n),o=gi(e,t)(n),a=Boolean(null===r||void 0===r?void 0:r.length),s=Boolean(null===o||void 0===o?void 0:o.length);return!i&&a&&s}}(c,u)),R=(0,i.v9)(bi),T=(0,i.v9)(ji),A=(0,i.v9)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var n=mi(t),r=vi(t),i=Boolean(null===n||void 0===n?void 0:n.length);return!r&&i&&e}}(_)),E=(0,i.I0)(),q=ni().catalogItem,D=_&&O,L="".concat(c.description,": ").concat(l.details.name," - iFood");(0,j.useEffect)((function(){var e;l.uuid&&c.id&&(null===k||void 0===k||null===(e=k.details)||void 0===e?void 0:e.id)!==c.id&&E((0,mn.gi)({merchantUuid:l.uuid,code:c.id}))}),[l.uuid,c.id,E,null===k||void 0===k||null===(t=k.details)||void 0===t?void 0:t.id]),(0,j.useEffect)((function(){l.uuid&&c.id&&E((0,oi.RT)({uuid:l.uuid,itemsUuid:[c.id]}))}),[E,l.uuid,c.id]),(0,j.useEffect)((function(){l.uuid&&c.id&&(null===q||void 0===q?void 0:q.name)&&D&&E((0,Oi.E6)({merchantUuid:l.uuid,productUuid:c.id,productCategoryName:q.name}))}),[E,l.uuid,c.id,D,null===q||void 0===q?void 0:q.name]);var B,F,G,U,H=(0,j.useCallback)((function(e){if(e.includes("".concat(si.zZ,"="))){var t=(0,jt.IZ)(l.details);E((0,w.yC)({isOpen:!0,restaurantSlug:f,dishId:(0,Xn.JY)(e),menuCode:null===q||void 0===q?void 0:q.code,checkoutId:p,category:t.category}))}}),[p,E,l.details,f,null===q||void 0===q?void 0:q.code]);return(0,j.useEffect)((function(){return Z.Router.events.on("routeChangeStart",H),function(){Z.Router.events.off("routeChangeStart",H)}}),[H]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Dn.default,{children:(0,r.jsx)("title",{children:L},"ab")}),!h&&m&&(0,r.jsx)(ii.Z,{}),h&&!m&&(0,r.jsx)(N.$j,{center:!0}),!h&&!m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ri,{merchant:l,catalogCode:u,product:c,merchantSlug:f,isStickyHeader:g,isPage:y,setDetailContentElement:b,handleClose:v,showButtonReport:x,openReportModal:C}),(0,r.jsxs)("div",{"data-test-id":"product-detail-modal-cross-sell",className:I()("product-detail-modal__cross-sell",{"product-detail-modal__cross-sell-mobile":M.tq}),children:[A&&(0,r.jsx)(_i,{isPromotion:S,catalogCode:u,merchant:l,isPage:y}),R&&(0,r.jsx)(fi,{merchant:l,isPromotion:S,catalogCode:u,isPage:y}),P&&(0,r.jsx)(Ci,{merchant:l,product:c,isPromotion:S,catalogCode:u,closeModal:v,isPage:y}),T&&(0,r.jsx)(xi,{merchant:l,closeModal:v}),(0,r.jsx)(Yn.Z,{max:"desktop-s",children:(0,r.jsx)(Pr,{text:null!==(B=null===c||void 0===c?void 0:c.additionalInfo)&&void 0!==B?B:null===k||void 0===k||null===(n=k.details)||void 0===n?void 0:n.additionalInfo,itemName:null!==(F=null===c||void 0===c?void 0:c.description)&&void 0!==F?F:null===k||void 0===k||null===(o=k.details)||void 0===o?void 0:o.description,itemCode:null!==(G=null===c||void 0===c?void 0:c.code)&&void 0!==G?G:null===k||void 0===k||null===(a=k.details)||void 0===a?void 0:a.code,itemId:null!==(U=null===c||void 0===c?void 0:c.id)&&void 0!==U?U:null===k||void 0===k||null===(s=k.details)||void 0===s?void 0:s.id,merchantId:null===l||void 0===l?void 0:l.uuid})})]})]})]})}ki.propTypes={merchant:O().object.isRequired,product:O().object.isRequired,catalogCode:O().string.isRequired,merchantSlug:O().object.isRequired,checkoutId:O().string,isLoading:O().bool.isRequired,hasError:O().bool.isRequired,onClose:O().func.isRequired,setDetailContentElement:O().func.isRequired,isStickyHeader:O().bool.isRequired,isPage:O().bool,showButtonReport:O().bool.isRequired,openReportModal:O().func.isRequired},ki.defaultProps={checkoutId:"",isPage:!1};var Si=function(e){return function(e){return function(e){return e.contextCard}(e).checkout}(e).isOpened};n(75102);function Pi(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ii(e,t,n[t])}))}return e}function wi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ni(e){var t=e.isOpen,n=e.isLoading,o=e.hasError,a=e.product,s=e.merchant,l=wi(e,["isOpen","isLoading","hasError","product","merchant"]),c=(0,i.v9)(u.o8,i.wU),d=(0,i.v9)(Un.R5),f=(0,i.v9)(Si),p=(0,i.I0)(),h=(0,j.useRef)(),m=(0,j.useState)(),v=m[0],b=m[1],g=(0,j.useState)(!1),y=g[0],x=g[1],_=(0,j.useState)(),O=_[0],k=_[1],S=On().handleReportItem,P=function(e,t){var n=ni().product,r=(0,ur.Z)(),i=(0,j.useState)(!1),o=i[0],a=i[1],s=(0,j.useState)(0),l=s[0],c=s[1],u=(0,j.useState)(0),d=u[0],f=u[1],p=(0,j.useCallback)((function(){if(t)if(r){var n=e.scrollTop,i=n<40?n:40;c((function(e){return e!==i?i:e}));var o=40===l?0:10;f((function(e){return e!==o?o:e}))}else{var s=t.getBoundingClientRect().top;a(s-100<0)}}),[r,e,l,t]);return(0,j.useEffect)((function(){return null===e||void 0===e||e.addEventListener("scroll",p),function(){null===e||void 0===e||e.removeEventListener("scroll",p)}}),[e,p]),(0,j.useEffect)((function(){a(!1)}),[null===n||void 0===n?void 0:n.id]),{isHeaderFixed:o,borderRadius:d,mobileTopOffset:l}}(null===h||void 0===h?void 0:h.current,O),I=P.borderRadius,R=P.isHeaderFixed,T=P.mobileTopOffset;(0,j.useEffect)((function(){var e;(e=C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn.ZP.itemReportReasonsDetails();case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Pi(o,r,i,a,s,"next",e)}function s(e){Pi(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]);var A=(0,j.useCallback)((function(){p((0,w.yC)(Ri({},c,{isOpen:!1,pushRoute:!0}))),p((0,Oi.Fr)()),document.body.classList.remove("groceries-item-modal-detail-is-open")}),[p,c]);(0,j.useEffect)((function(){document.body.classList.add("groceries-item-modal-detail-is-open")}),[t,d]);var E=s.details;window.scrollTo(0,0),(0,j.useEffect)((function(){!n&&!o&&t&&(null===a||void 0===a?void 0:a.description)&&E&&Bt.Z.viewItem(a,E)}),[n,o,t,a,E]);var q=function(){x(!0)};return(0,r.jsxs)(r.Fragment,{children:[M.tq&&(0,r.jsx)(N.u_,{overlayClassName:"product-detail-modal__overlay",variant:"product-detail-modal",animation:"bottom",isOpen:t,type:"fullpage",onRequestClose:A,contentRef:h,scrollLock:!f,style:{overlay:{"--topOffset":"".concat(T,"px"),"--borderRadius":"".concat(I,"px")}},children:(0,r.jsx)(ki,Ri({},l,{merchant:s,hasError:o,isLoading:n,product:a,onClose:A,setDetailContentElement:k,isStickyHeader:R,showButtonReport:null===v||void 0===v?void 0:v.enabled,openReportModal:q,isMobile:M.tq}))}),!M.tq&&(0,r.jsx)(ki,Ri({},l,{merchant:s,hasError:o,isLoading:n,product:a,onClose:A,setDetailContentElement:k,isStickyHeader:!1,isPage:!0,showButtonReport:null===v||void 0===v?void 0:v.enabled,openReportModal:q})),v&&(0,r.jsx)(gn,{isOpen:y,details:v,onRequestClose:function(e){x(!1),e&&S(s.uuid,a.id,e)}})]})}Ni.propTypes={isOpen:O().bool.isRequired,merchant:O().object.isRequired,product:O().object,catalogCode:O().string,merchantSlug:O().object,checkoutId:O().string,isLoading:O().bool.isRequired,hasError:O().bool.isRequired},Ni.defaultProps={product:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]},catalogCode:"",merchantSlug:{},checkoutId:void 0};var Ti=function(e){var t=e.shouldOpenCatalogItemModal,n=e.shouldOpenGroceriesCatalogItemModal,o=(0,i.v9)(u.Yt),a=(0,i.v9)(u.CC),s=(0,i.v9)(m),c=(0,i.v9)(u.xE),d=(0,i.v9)(u.Xj),f=(0,i.v9)(g),p=(0,i.v9)(y),h=(0,i.v9)(u.XW),v=(0,i.oR)();return(0,j.useEffect)((function(){t&&s&&a&&kn.ZP.groceriesLowStockModel().then((function(e){var t,n=e.tagName,r=v.getState();v.dispatch((0,Ft.Dy)({dish:s,restaurant:a,routerStates:(0,Lr.I_)(r),hasDishDiscountTag:Boolean((0,jt.Yk)(null!==(t=null===s||void 0===s?void 0:s.tags)&&void 0!==t?t:[],(0,l.Gp)(r))),isLowStock:(0,Wt.ge)(s,n)}))}))}),[s,a,t,v]),n?(0,r.jsx)(Ni,{merchantSlug:o,merchant:a,product:s,checkoutId:c,isOpen:t,catalogCode:d,isLoading:f,hasError:p}):(0,r.jsx)(Zn,{restaurantSlug:o,restaurant:a,dish:s,checkoutId:c,isOpen:t,menuCode:d,isLoading:f,hasError:p,dishId:h})},Ai=function(){var e=(0,i.v9)(b),t=(0,i.v9)(v);return e&&void 0!==t?(0,r.jsx)(Ti,{shouldOpenCatalogItemModal:e,shouldOpenGroceriesCatalogItemModal:t}):null}},56044:function(e,t,n){"use strict";n.d(t,{dX:function(){return a},iz:function(){return s},RR:function(){return l},yu:function(){return c},bR:function(){return u},ZX:function(){return d},u2:function(){return f},sO:function(){return p},HT:function(){return h},Bw:function(){return m}});var r=n(52668),i=n(42383),o=n(18967),a=function(e){return e.restaurant},s=function(e){var t;return null===(t=a(e))||void 0===t?void 0:t.details},l=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.name},c=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.evaluationAverage},u=function(e){var t,n,i,a=null===(i=null===(t=s(e))||void 0===t||null===(n=t.resources)||void 0===n?void 0:n.find((function(e){return"LOGO"===e.type})))||void 0===i?void 0:i.fileName;return(0,o.QW)(r.el.MERCHANT_LOGO,a,r.zf.THUMBNAIL)},d=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.recent},f=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.minimumOrderValue},p=function(e){return a(e).filteredCatalog},h=function(e){var t;return!!(null===(t=p(e))||void 0===t?void 0:t.length)},m=function(e){return(0,i.Qs)(e).isLoading.filteredCatalog}},90003:function(e,t,n){"use strict";function r(e){var t;if(e){var n=Boolean(e.choices),r=n&&!(null===(t=e.choices)||void 0===t?void 0:t.some((function(e){var t=e.min,n=e.max,r=e.garnishItens;return t!==n||1!==r.length})));return!n||r}}n.d(t,{k:function(){return r}})},66290:function(e,t,n){"use strict";var r=n(45697),i=n.n(r);t.Z={setToastrMessage:i().func.isRequired}},86997:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(5907),i=n.n(r),o=n(35290),a=n(60996),s=n(59810).ZP.countryCode;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(!("google"in n.g))return o.cM.critical("Google API was not found"),!1;var l=new google.maps.places.AutocompleteService;if(!l)return o.cM.critical("Autocomplete API was not found"),!1;if(l&&""!==e&&e.replace(" ","").length){i()(t,"onStartCallback",e);var c=r?1e3:void 0,u=r?new google.maps.LatLng(r):void 0;return l.getPlacePredictions({input:e,componentRestrictions:{country:[s]},radius:c,location:u},(function(e,n){["OK","ZERO_RESULTS"].includes(n)?"ZERO_RESULTS"===n?i()(t,"onSuccessCallback",[]):i()(t,"onSuccessCallback",e):(o.cM.error("Autocomplete response status '".concat(n,"' not expected")),i()(t,"onFailCallback",n)),a.Z.clickSearchAddressAutocompleteActionResult(n)})),!0}return i()(t,"onSuccessCallback",[]),!0}},41266:function(e,t,n){"use strict";n.d(t,{JY:function(){return h},Nm:function(){return p},Ig:function(){return m},RP:function(){return f}});var r=n(38848),i=["PORTION_SIZE","NOT_APPLICABLE"],o=["DIET","FROSTY","LAC_FREE","NATURAL","ORGANIC","SUGAR_FREE","VEGAN","VEGETARIAN","ZERO"],a=n(32790),s=n.n(a);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function f(e){var t,n,r;return null!==(r=null===(t=e.sellingOption)||void 0===t||null===(n=t.availableUnits)||void 0===n?void 0:n.includes("WEIGHT"))&&void 0!==r&&r}function p(e,t){var n;return t/(null===(n=e.sellingOption)||void 0===n?void 0:n.minimum)*1e3}function h(e){try{var t,n,i=new URL(e,null!==(t=s().DOMAIN)&&void 0!==t?t:"https://www.ifood.com.br");return null!==(n=i.searchParams.get(r.zZ))&&void 0!==n?n:i.searchParams.get(r.e_)}catch(a){var o=e.slice(e.indexOf("?")).split("&").find((function(e){var t=c(e.split("="),1)[0];return t===r.zZ||t===r.e_}));return null==o?null:c(o.split("="),2)[1]}}function m(e){return e.filter((function(e){return!i.includes(e.group)})).reduce((function(e,t){return u(e).concat(u(t.tags))}),[]).filter((function(e){return o.includes(e)}))}},96723:function(){},5845:function(){},8635:function(){},63735:function(){},29306:function(){},47112:function(){},50574:function(){},54635:function(){},92630:function(){},93137:function(){},36867:function(){},7565:function(){},69028:function(){},28556:function(){},78198:function(){},10655:function(){},71209:function(){},36837:function(){},63837:function(){},88579:function(){},11129:function(){},7827:function(){},40348:function(){},71724:function(){},75565:function(){},21501:function(){},34898:function(){},9090:function(){},85410:function(){},19339:function(){},23521:function(){},27540:function(){},25656:function(){},44355:function(){},68532:function(){},677:function(){},84099:function(){},61875:function(){},20323:function(){},70637:function(){},99749:function(){},54322:function(){},70560:function(){},73468:function(){},68783:function(){},33971:function(){},64901:function(){},65770:function(){},84549:function(){},75102:function(){},95002:function(){}}]);
//# sourceMappingURL=1565-76c8497c37cc4a16.js.map
//# debugId=4ca6e66f-a0ae-548b-8057-36130149e62f
